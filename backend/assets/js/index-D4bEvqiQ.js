import{j as e,T as n,B as t,b as s,D as a,A as r,I as l,d as i,M as o,e as c,f as d,L as h,g as x,h as m,i as u,k as p,C as j,l as g,m as y,n as f,o as v,P as b,S as _,p as C,q as S,r as w,G as k,s as P,t as I,u as E,v as W,w as A,x as T,y as R,z as D,E as L,F as z,H as N,J as F,K as M,N as O,O as q,Q as B,R as $,U as H,V as U,W as J,X as K,Y as G,Z as Y,$ as V,a0 as Q}from"./mui-core-B6MfUL78.js";import{c as X,r as Z,a as ee,u as ne,d as te,O as se,e as ae,g as re,f as le,h as ie,N as oe,B as ce}from"./react-vendor-sS-4GKsU.js";import{a as de,u as he,b as xe,c as me,Q as ue,d as pe}from"./utils-CrvDDTSt.js";import{M as je,A as ge,L as ye,D as fe,C as ve,P as be,W as _e,E as Ce,a as Se,b as we,S as ke,c as Pe,d as Ie,V as Ee,e as We,f as Ae,g as Te,h as Re,T as De,i as Le,j as ze,k as Ne,l as Fe,m as Me,n as Oe,o as qe,p as Be,q as $e,r as He,s as Ue,t as Je,u as Ke,I as Ge,U as Ye,v as Ve,w as Qe,x as Xe,y as Ze,R as en,z as nn,B as tn,F as sn,G as an,H as rn,J as ln,K as on,N as cn}from"./mui-icons-MuXPRbDZ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)}).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?n.credentials="include":"anonymous"===e.crossOrigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();var dn={},hn=X;function xn(e){var n,t,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=xn(e[n]))&&(s&&(s+=" "),s+=t);else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function mn(){for(var e,n,t=0,s="";t<arguments.length;)(e=arguments[t++])&&(n=xn(e))&&(s&&(s+=" "),s+=n);return s}dn.createRoot=hn.createRoot,dn.hydrateRoot=hn.hydrateRoot;const un=e=>"number"==typeof e&&!isNaN(e),pn=e=>"string"==typeof e,jn=e=>"function"==typeof e,gn=e=>pn(e)||jn(e)?e:null,yn=e=>Z.isValidElement(e)||pn(e)||jn(e)||un(e);function fn(e){let{enter:n,exit:t,appendPosition:s=!1,collapse:a=!0,collapseDuration:r=300}=e;return function(e){let{children:l,position:i,preventExitTransition:o,done:c,nodeRef:d,isIn:h}=e;const x=s?`${n}--${i}`:n,m=s?`${t}--${i}`:t,u=Z.useRef(0);return Z.useLayoutEffect(()=>{const e=d.current,n=x.split(" "),t=s=>{s.target===d.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",t),e.removeEventListener("animationcancel",t),0===u.current&&"animationcancel"!==s.type&&e.classList.remove(...n))};e.classList.add(...n),e.addEventListener("animationend",t),e.addEventListener("animationcancel",t)},[]),Z.useEffect(()=>{const e=d.current,n=()=>{e.removeEventListener("animationend",n),a?function(e,n,t){void 0===t&&(t=300);const{scrollHeight:s,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=s+"px",a.transition=`all ${t}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(n,t)})})}(e,c,r):c()};h||(o?n():(u.current=1,e.className+=` ${m}`,e.addEventListener("animationend",n)))},[h]),ee.createElement(ee.Fragment,null,l)}}function vn(e,n){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:n}:{}}const bn={list:new Map,emitQueue:new Map,on(e,n){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(n),this},off(e,n){if(n){const t=this.list.get(e).filter(e=>e!==n);return this.list.set(e,t),this}return this.list.delete(e),this},cancelEmit(e){const n=this.emitQueue.get(e);return n&&(n.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(n=>{const t=setTimeout(()=>{n(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(t)})}},_n=e=>{let{theme:n,type:t,...s}=e;return ee.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":`var(--toastify-icon-color-${t})`,...s})},Cn={info:function(e){return ee.createElement(_n,{...e},ee.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return ee.createElement(_n,{...e},ee.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return ee.createElement(_n,{...e},ee.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return ee.createElement(_n,{...e},ee.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ee.createElement("div",{className:"Toastify__spinner"})}};function Sn(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function wn(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function kn(e){let{closeToast:n,theme:t,ariaLabel:s="close"}=e;return ee.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:e=>{e.stopPropagation(),n(e)},"aria-label":s},ee.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ee.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Pn(e){let{delay:n,isRunning:t,closeToast:s,type:a="default",hide:r,className:l,style:i,controlledProgress:o,progress:c,rtl:d,isIn:h,theme:x}=e;const m=r||o&&0===c,u={...i,animationDuration:`${n}ms`,animationPlayState:t?"running":"paused",opacity:m?0:1};o&&(u.transform=`scaleX(${c})`);const p=mn("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${x}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":d}),j=jn(l)?l({rtl:d,type:a,defaultClassName:p}):mn(p,l);return ee.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:j,style:u,[o&&c>=1?"onTransitionEnd":"onAnimationEnd"]:o&&c<1?null:()=>{h&&s()}})}const In=e=>{const{isRunning:n,preventExitTransition:t,toastRef:s,eventHandlers:a}=function(e){const[n,t]=Z.useState(!1),[s,a]=Z.useState(!1),r=Z.useRef(null),l=Z.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,i=Z.useRef(e),{autoClose:o,pauseOnHover:c,closeToast:d,onClick:h,closeOnClick:x}=e;function m(n){if(e.draggable){"touchstart"===n.nativeEvent.type&&n.nativeEvent.preventDefault(),l.didMove=!1,document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),document.addEventListener("touchmove",g),document.addEventListener("touchend",y);const t=r.current;l.canCloseOnClick=!0,l.canDrag=!0,l.boundingRect=t.getBoundingClientRect(),t.style.transition="",l.x=Sn(n.nativeEvent),l.y=wn(n.nativeEvent),"x"===e.draggableDirection?(l.start=l.x,l.removalDistance=t.offsetWidth*(e.draggablePercent/100)):(l.start=l.y,l.removalDistance=t.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function u(n){if(l.boundingRect){const{top:t,bottom:s,left:a,right:r}=l.boundingRect;"touchend"!==n.nativeEvent.type&&e.pauseOnHover&&l.x>=a&&l.x<=r&&l.y>=t&&l.y<=s?j():p()}}function p(){t(!0)}function j(){t(!1)}function g(t){const s=r.current;l.canDrag&&s&&(l.didMove=!0,n&&j(),l.x=Sn(t),l.y=wn(t),l.delta="x"===e.draggableDirection?l.x-l.start:l.y-l.start,l.start!==l.x&&(l.canCloseOnClick=!1),s.style.transform=`translate${e.draggableDirection}(${l.delta}px)`,s.style.opacity=""+(1-Math.abs(l.delta/l.removalDistance)))}function y(){document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",y);const n=r.current;if(l.canDrag&&l.didMove&&n){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance)return a(!0),void e.closeToast();n.style.transition="transform 0.2s, opacity 0.2s",n.style.transform=`translate${e.draggableDirection}(0)`,n.style.opacity="1"}}Z.useEffect(()=>{i.current=e}),Z.useEffect(()=>(r.current&&r.current.addEventListener("d",p,{once:!0}),jn(e.onOpen)&&e.onOpen(Z.isValidElement(e.children)&&e.children.props),()=>{const e=i.current;jn(e.onClose)&&e.onClose(Z.isValidElement(e.children)&&e.children.props)}),[]),Z.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||j(),window.addEventListener("focus",p),window.addEventListener("blur",j)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",p),window.removeEventListener("blur",j))}),[e.pauseOnFocusLoss]);const f={onMouseDown:m,onTouchStart:m,onMouseUp:u,onTouchEnd:u};return o&&c&&(f.onMouseEnter=j,f.onMouseLeave=p),x&&(f.onClick=e=>{h&&h(e),l.canCloseOnClick&&d()}),{playToast:p,pauseToast:j,isRunning:n,preventExitTransition:s,toastRef:r,eventHandlers:f}}(e),{closeButton:r,children:l,autoClose:i,onClick:o,type:c,hideProgressBar:d,closeToast:h,transition:x,position:m,className:u,style:p,bodyClassName:j,bodyStyle:g,progressClassName:y,progressStyle:f,updateId:v,role:b,progress:_,rtl:C,toastId:S,deleteToast:w,isIn:k,isLoading:P,iconOut:I,closeOnClick:E,theme:W}=e,A=mn("Toastify__toast",`Toastify__toast-theme--${W}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":C},{"Toastify__toast--close-on-click":E}),T=jn(u)?u({rtl:C,position:m,type:c,defaultClassName:A}):mn(A,u),R=!!_||!i,D={closeToast:h,type:c,theme:W};let L=null;return!1===r||(L=jn(r)?r(D):Z.isValidElement(r)?Z.cloneElement(r,D):kn(D)),ee.createElement(x,{isIn:k,done:w,position:m,preventExitTransition:t,nodeRef:s},ee.createElement("div",{id:S,onClick:o,className:T,...a,style:p,ref:s},ee.createElement("div",{...k&&{role:b},className:jn(j)?j({type:c}):mn("Toastify__toast-body",j),style:g},null!=I&&ee.createElement("div",{className:mn("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},I),ee.createElement("div",null,l)),L,ee.createElement(Pn,{...v&&!R?{key:`pb-${v}`}:{},rtl:C,theme:W,delay:i,isRunning:n,isIn:k,closeToast:h,hide:d,type:c,style:f,className:y,controlledProgress:R,progress:_||0})))},En=function(e,n){return void 0===n&&(n=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:n}},Wn=fn(En("bounce",!0));fn(En("slide",!0)),fn(En("zoom")),fn(En("flip"));const An=Z.forwardRef((e,n)=>{const{getToastToRender:t,containerRef:s,isToastActive:a}=function(e){const[,n]=Z.useReducer(e=>e+1,0),[t,s]=Z.useState([]),a=Z.useRef(null),r=Z.useRef(new Map).current,l=e=>-1!==t.indexOf(e),i=Z.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:l,getToast:e=>r.get(e)}).current;function o(e){let{containerId:n}=e;const{limit:t}=i.props;!t||n&&i.containerId!==n||(i.count-=i.queue.length,i.queue=[])}function c(e){s(n=>null==e?[]:n.filter(n=>n!==e))}function d(){const{toastContent:e,toastProps:n,staleId:t}=i.queue.shift();x(e,n,t)}function h(e,t){let{delay:s,staleId:l,...o}=t;if(!yn(e)||(h=o,!a.current||i.props.enableMultiContainer&&h.containerId!==i.props.containerId||r.has(h.toastId)&&null==h.updateId))return;var h;const{toastId:m,updateId:u,data:p}=o,{props:j}=i,g=()=>c(m),y=null==u;y&&i.count++;const f={...j,style:j.toastStyle,key:i.toastKey++,...Object.fromEntries(Object.entries(o).filter(e=>{let[n,t]=e;return null!=t})),toastId:m,updateId:u,data:p,closeToast:g,isIn:!1,className:gn(o.className||j.toastClassName),bodyClassName:gn(o.bodyClassName||j.bodyClassName),progressClassName:gn(o.progressClassName||j.progressClassName),autoClose:!o.isLoading&&(v=o.autoClose,b=j.autoClose,!1===v||un(v)&&v>0?v:b),deleteToast(){const e=vn(r.get(m),"removed");r.delete(m),bn.emit(4,e);const t=i.queue.length;if(i.count=null==m?i.count-i.displayedToast:i.count-1,i.count<0&&(i.count=0),t>0){const e=null==m?i.props.limit:1;if(1===t||1===e)i.displayedToast++,d();else{const n=e>t?t:e;i.displayedToast=n;for(let e=0;e<n;e++)d()}}else n()}};var v,b;f.iconOut=function(e){let{theme:n,type:t,isLoading:s,icon:a}=e,r=null;const l={theme:n,type:t};return!1===a||(jn(a)?r=a(l):Z.isValidElement(a)?r=Z.cloneElement(a,l):pn(a)||un(a)?r=a:s?r=Cn.spinner():t in Cn&&(r=Cn[t](l))),r}(f),jn(o.onOpen)&&(f.onOpen=o.onOpen),jn(o.onClose)&&(f.onClose=o.onClose),f.closeButton=j.closeButton,!1===o.closeButton||yn(o.closeButton)?f.closeButton=o.closeButton:!0===o.closeButton&&(f.closeButton=!yn(j.closeButton)||j.closeButton);let _=e;Z.isValidElement(e)&&!pn(e.type)?_=Z.cloneElement(e,{closeToast:g,toastProps:f,data:p}):jn(e)&&(_=e({closeToast:g,toastProps:f,data:p})),j.limit&&j.limit>0&&i.count>j.limit&&y?i.queue.push({toastContent:_,toastProps:f,staleId:l}):un(s)?setTimeout(()=>{x(_,f,l)},s):x(_,f,l)}function x(e,n,t){const{toastId:a}=n;t&&r.delete(t);const l={content:e,props:n};r.set(a,l),s(e=>[...e,a].filter(e=>e!==t)),bn.emit(4,vn(l,null==l.props.updateId?"added":"updated"))}return Z.useEffect(()=>(i.containerId=e.containerId,bn.cancelEmit(3).on(0,h).on(1,e=>a.current&&c(e)).on(5,o).emit(2,i),()=>{r.clear(),bn.emit(3,i)}),[]),Z.useEffect(()=>{i.props=e,i.isToastActive=l,i.displayedToast=t.length}),{getToastToRender:function(n){const t=new Map,s=Array.from(r.values());return e.newestOnTop&&s.reverse(),s.forEach(e=>{const{position:n}=e.props;t.has(n)||t.set(n,[]),t.get(n).push(e)}),Array.from(t,e=>n(e[0],e[1]))},containerRef:a,isToastActive:l}}(e),{className:r,style:l,rtl:i,containerId:o}=e;function c(e){const n=mn("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":i});return jn(r)?r({position:e,rtl:i,defaultClassName:n}):mn(n,gn(r))}return Z.useEffect(()=>{n&&(n.current=s.current)},[]),ee.createElement("div",{ref:s,className:"Toastify",id:o},t((e,n)=>{const t=n.length?{...l}:{...l,pointerEvents:"none"};return ee.createElement("div",{className:c(e),style:t,key:`container-${e}`},n.map((e,t)=>{let{content:s,props:r}=e;return ee.createElement(In,{...r,isIn:a(r.toastId),style:{...r.style,"--nth":t+1,"--len":n.length},key:`toast-${r.key}`},s)}))}))});An.displayName="ToastContainer",An.defaultProps={position:"top-right",transition:Wn,autoClose:5e3,closeButton:kn,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Tn,Rn=new Map,Dn=[],Ln=1;function zn(){return""+Ln++}function Nn(e){return e&&(pn(e.toastId)||un(e.toastId))?e.toastId:zn()}function Fn(e,n){return Rn.size>0?bn.emit(0,e,n):Dn.push({content:e,options:n}),n.toastId}function Mn(e,n){return{...n,type:n&&n.type||e,toastId:Nn(n)}}function On(e){return(n,t)=>Fn(n,Mn(e,t))}function qn(e,n){return Fn(e,Mn("default",n))}qn.loading=(e,n)=>Fn(e,Mn("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...n})),qn.promise=function(e,n,t){let s,{pending:a,error:r,success:l}=n;a&&(s=pn(a)?qn.loading(a,t):qn.loading(a.render,{...t,...a}));const i={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(e,n,a)=>{if(null==n)return void qn.dismiss(s);const r={type:e,...i,...t,data:a},l=pn(n)?{render:n}:n;return s?qn.update(s,{...r,...l}):qn(l.render,{...r,...l}),a},c=jn(e)?e():e;return c.then(e=>o("success",l,e)).catch(e=>o("error",r,e)),c},qn.success=On("success"),qn.info=On("info"),qn.error=On("error"),qn.warning=On("warning"),qn.warn=qn.warning,qn.dark=(e,n)=>Fn(e,Mn("default",{theme:"dark",...n})),qn.dismiss=e=>{Rn.size>0?bn.emit(1,e):Dn=Dn.filter(n=>null!=e&&n.options.toastId!==e)},qn.clearWaitingQueue=function(e){return void 0===e&&(e={}),bn.emit(5,e)},qn.isActive=e=>{let n=!1;return Rn.forEach(t=>{t.isToastActive&&t.isToastActive(e)&&(n=!0)}),n},qn.update=function(e,n){void 0===n&&(n={}),setTimeout(()=>{const t=function(e,n){let{containerId:t}=n;const s=Rn.get(t||Tn);return s&&s.getToast(e)}(e,n);if(t){const{props:s,content:a}=t,r={delay:100,...s,...n,toastId:n.toastId||e,updateId:zn()};r.toastId!==e&&(r.staleId=e);const l=r.render||a;delete r.render,Fn(l,r)}},0)},qn.done=e=>{qn.update(e,{progress:1})},qn.onChange=e=>(bn.on(4,e),()=>{bn.off(4,e)}),qn.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},qn.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},bn.on(2,e=>{Tn=e.containerId||e,Rn.set(Tn,e),Dn.forEach(e=>{bn.emit(0,e.content,e.options)}),Dn=[]}).on(3,e=>{Rn.delete(e.containerId||e),0===Rn.size&&bn.off(0).off(1).off(5)});const Bn=de.create({baseURL:"https://evolvepayroll.co.ke/api",headers:{"Content-Type":"application/json"},withCredentials:!0});Bn.interceptors.request.use(e=>{var n,t;const s=localStorage.getItem("userType"),a=localStorage.getItem("token"),r=localStorage.getItem("user");if(a&&(e.headers.Authorization=`Bearer ${a}`),r)try{const n=JSON.parse(r);e.headers["X-User"]=JSON.stringify(n)}catch(i){localStorage.removeItem("user")}const l=s?`/${s}`:"";return!(["/unified_auth.php","/employees.php","/leave.php","/leave_balance.php","/payroll.php","/clear_cache.php","/salary_structures.php","/employee_salary_structure.php","/my_salary_structure.php","/calculate_payroll.php"].some(n=>{var t;return null==(t=e.url)?void 0:t.includes(n)})||(null==(n=e.url)?void 0:n.startsWith("/employer"))||(null==(t=e.url)?void 0:t.startsWith("/employee")))&&l&&(e.url=`${l}${e.url}`),e},e=>Promise.reject(e)),Bn.interceptors.response.use(e=>e,e=>{var n;if(401===(null==(n=e.response)?void 0:n.status)){const e=localStorage.getItem("userType");localStorage.clear();const n={employer:"/employer/login",employee:"/employee/login"};window.location.href=n[e]||"/"}return Promise.reject(e)});const $n={login:async(e,n)=>{try{const t=(await Bn.post("/unified_auth.php",{username:e,password:n})).data;if(!(null==t?void 0:t.success)||!t.token||!t.user)throw new Error((null==t?void 0:t.message)||"Login failed");return localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("userType",t.user.user_type),void 0!==t.user.force_password_change&&localStorage.setItem("forcePasswordChange",t.user.force_password_change.toString()),t}catch(t){throw t}},employerLogin:async(e,n)=>await $n.login(e,n),employeeLogin:async(e,n)=>await $n.login(e,n),logout:async e=>{const n="employer"===e?"/employer/auth.php?action=logout":"/employee/auth.php?action=logout";try{await Bn.post(n)}catch(t){}localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userType"),localStorage.removeItem("forcePasswordChange")},verifyToken:async e=>{const n="employer"===e?"/employer/auth.php?action=verify":"/employee/auth.php?action=verify";return(await Bn.get(n)).data},changePassword:async(e,n)=>(await Bn.post("/employee/auth.php?action=change-password",{current_password:e,new_password:n})).data,getCurrentUser:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null},getUserType:()=>localStorage.getItem("userType"),getToken:()=>localStorage.getItem("token"),isForcePasswordChange:()=>"true"===localStorage.getItem("forcePasswordChange")},Hn=Z.createContext({}),Un=()=>Z.useContext(Hn),Jn=({children:n})=>{const[t,s]=Z.useState(null),[a,r]=Z.useState(null),[l,i]=Z.useState(!0);Z.useEffect(()=>{const e=localStorage.getItem("token"),n=localStorage.getItem("user"),t=localStorage.getItem("userType");e&&n&&(s(JSON.parse(n)),r(t)),i(!1)},[]);const o={user:t,userType:a,login:async(e,n)=>{try{const t=await $n.employerLogin(e,n);if(!t.success)throw new Error(t.message||"Login failed");if(!t.token||!t.user)throw new Error("Invalid response format from server");const a=t.user.role;let l="employee";return["super_admin","admin","employer","hr_manager","payroll_officer","department_manager","recruiter"].includes(a)?l="employer":"employee"===a&&(l="employee"),s(t.user),r(l),localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("userType",l),t.force_password_change&&localStorage.setItem("forcePasswordChange",t.force_password_change),t}catch(t){throw t}},employerLogin:async(e,n)=>{try{const t=await $n.employerLogin(e,n);if(!t.success)throw new Error(t.message||"Login failed");if(!t.token||!t.user)throw new Error("Invalid response format from server");return s(t.user),r("employer"),localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("userType","employer"),t}catch(t){throw t}},employeeLogin:async(e,n)=>{try{const t=await $n.employeeLogin(e,n);return s(t.user),r("employee"),localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("userType","employee"),localStorage.setItem("forcePasswordChange",t.force_password_change),t}catch(t){throw t}},logout:async()=>{try{await $n.logout(a)}catch(e){}finally{s(null),r(null),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userType"),localStorage.removeItem("forcePasswordChange")}},loading:l,isEmployer:"employer"===a,isEmployee:"employee"===a};return e.jsx(Hn.Provider,{value:o,children:n})},Kn=260,Gn=[{text:"Dashboard",icon:e.jsx(fe,{}),path:"/employer/dashboard"}],Yn=[{text:"Departments",icon:e.jsx(ve,{}),path:"/employer/departments"},{text:"Employees",icon:e.jsx(be,{}),path:"/employer/employees"},{text:"Recruitment",icon:e.jsx(_e,{}),path:"/employer/recruitment"},{text:"Leave Management",icon:e.jsx(Ce,{}),path:"/employer/leave"},{text:"Attendance",icon:e.jsx(Se,{}),path:"/employer/attendance"},{text:"Performance",icon:e.jsx(we,{}),path:"/employer/performance"},{text:"Training",icon:e.jsx(ke,{}),path:"/employer/training"}],Vn=[{text:"Payroll",icon:e.jsx(Pe,{}),path:"/employer/payroll"},{text:"Reports",icon:e.jsx(we,{}),path:"/employer/reports"},{text:"Settings",icon:e.jsx(Ie,{}),path:"/employer/settings"}],Qn=[{text:"Security & Config",icon:e.jsx(Ie,{}),path:"/employer/security"}];function Xn(){var j;const[g,y]=Z.useState(!1),[f,v]=Z.useState(null),b=ne(),_=te(),{user:C,logout:S}=Un(),w=e=>_.pathname.startsWith(e),k=()=>y(!g),P=()=>v(null),I=(n,r)=>e.jsxs(e.Fragment,{children:[e.jsx(t,{sx:{px:2,pt:1,pb:1},children:e.jsx(s,{variant:"overline",sx:{color:"#718096",fontWeight:600,fontSize:11},children:n})}),e.jsx(h,{sx:{pt:0},children:r.map(n=>e.jsx(x,{disablePadding:!0,children:e.jsxs(m,{onClick:()=>b(n.path),sx:{borderLeft:w(n.path)?"4px solid #d4af37":"4px solid transparent",backgroundColor:w(n.path)?"rgba(24, 35, 59, 0.1)":"transparent",color:w(n.path)?"#182d4bff":"inherit",fontWeight:w(n.path)?600:400,"&:hover":{backgroundColor:"rgba(26, 54, 93, 0.05)",borderLeftColor:"#d4af37",color:"#1a365d"}},children:[e.jsx(u,{sx:{minWidth:40,color:w(n.path)?"#182d4bff":"#4a5568"},children:n.icon}),e.jsx(p,{primary:n.text,primaryTypographyProps:{fontWeight:w(n.path)?600:400}})]})},n.text))}),e.jsx(a,{sx:{my:1}})]}),E=e.jsxs("div",{children:[e.jsx(n,{sx:{background:"linear-gradient(135deg, #1a365d, #2d3748)",color:"white"},children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(t,{sx:{width:60,height:60,borderRadius:"50%",background:"white",display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.2)"},children:e.jsx("img",{src:"/src/assets/lixnet2.png",alt:"Lixnet Logo",style:{width:"100%",height:"100%",objectFit:"contain"}})}),e.jsx(s,{variant:"h5",noWrap:!0,component:"div",sx:{fontWeight:700,letterSpacing:1},children:"Evolve"})]})}),e.jsx(a,{}),I("OVERVIEW",Gn),I("HUMAN RESOURCE",Yn),I("PAYROLL",Vn),I("CONFIGURATION",Qn)]});return e.jsxs(t,{sx:{display:"flex"},children:[e.jsx(r,{position:"fixed",sx:{width:{sm:"calc(100% - 260px)"},ml:{sm:"260px"},background:"#FFFFFF",color:"#2d3748",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsxs(n,{children:[e.jsx(l,{edge:"start",onClick:k,sx:{mr:2,display:{sm:"none"},color:"#2d3748"},children:e.jsx(je,{})}),e.jsx(s,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600},children:"Payroll Dashboard"}),e.jsx(l,{onClick:e=>v(e.currentTarget),children:e.jsx(i,{sx:{width:32,height:32,background:"#1a365d"},children:null==(j=null==C?void 0:C.username)?void 0:j.charAt(0).toUpperCase()})}),e.jsxs(o,{anchorEl:f,open:Boolean(f),onClose:P,children:[e.jsxs(c,{onClick:()=>{P(),b("/employee/portal")},children:[e.jsx(ge,{sx:{mr:1}})," My Profile"]}),e.jsxs(c,{onClick:async()=>{await S(),b("/login")},children:[e.jsx(ye,{sx:{mr:1}})," Logout"]})]})]})}),e.jsxs(t,{component:"nav",sx:{width:{sm:Kn},flexShrink:{sm:0}},children:[e.jsx(d,{variant:"temporary",open:g,onClose:k,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Kn}},children:E}),e.jsx(d,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Kn}},open:!0,children:E})]}),e.jsxs(t,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - 260px)"}},children:[e.jsx(n,{}),e.jsx(se,{})]})]})}function Zn(){const[n,a]=Z.useState(""),[r,i]=Z.useState(""),[o,c]=Z.useState(!1),[d,h]=Z.useState(""),[x,m]=Z.useState(!1),u=ne(),{login:p}=Un();return e.jsx(t,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#ffffff"},children:e.jsx(j,{component:"main",maxWidth:"xs",sx:{maxWidth:"360px"},children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(t,{component:"img",src:"/assets/images/lixnet3-CTT5jz29.png",alt:"Lixnet Logo",sx:{width:140,height:"auto",mb:2,objectFit:"contain"}}),e.jsx(s,{variant:"h6",sx:{mb:3,color:"#1976d2",fontWeight:600,textAlign:"center"},children:"Evolve Payroll and HR Management System"}),e.jsx(s,{variant:"body2",sx:{mb:3,color:"#666",textAlign:"center"},children:"Sign in to continue"}),d&&e.jsx(g,{severity:"error",sx:{mb:2,width:"100%",borderRadius:1},children:d}),e.jsxs(t,{component:"form",onSubmit:async e=>{var t,s;e.preventDefault(),h(""),m(!0);try{const e=await p(n,r);await new Promise(e=>setTimeout(e,100));const t=e.user,s=t.role||t.user_type;"employer"===s||"admin"===s||"super_admin"===s||"hr_manager"===s||"payroll_officer"===s||"department_manager"===s||"recruiter"===s?u("/employer/dashboard",{replace:!0}):"employee"===s?u("/employee/portal",{replace:!0}):u("/")}catch(a){h((null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.message)||"Login failed. Please check your credentials.")}finally{m(!1)}},sx:{width:"100%"},children:[e.jsx(y,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:n,onChange:e=>a(e.target.value),disabled:x,sx:{mb:1.5,"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:"#fafafa"}}}),e.jsx(y,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:o?"text":"password",id:"password",autoComplete:"current-password",value:r,onChange:e=>i(e.target.value),disabled:x,InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(l,{onClick:()=>c(!o),edge:"end",tabIndex:-1,children:o?e.jsx(Ee,{}):e.jsx(We,{})})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:"#fafafa"}}}),e.jsx(v,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:x,sx:{py:1.5,backgroundColor:"#1976d2",color:"#ffffff",textTransform:"none",fontSize:"1rem",fontWeight:500,borderRadius:1,boxShadow:"none","&:hover":{backgroundColor:"#1565c0",boxShadow:"none"},"&:disabled":{backgroundColor:"#e0e0e0"}},children:x?"Signing In...":"Sign In"})]}),e.jsx(t,{sx:{mt:2,textAlign:"center"},children:e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Don't have an organization account?"," ",e.jsx(v,{onClick:()=>u("/signup"),sx:{textTransform:"none",color:"#1976d2",fontWeight:500,p:0,minWidth:"auto","&:hover":{backgroundColor:"transparent",textDecoration:"underline"}},children:"Create one here"})]})}),e.jsx(s,{variant:"caption",sx:{mt:3,color:"#999",textAlign:"center"},children:"Compliant with Employment Act 2007, SHIF, NSSF, KRA"})]})})})}const et="/assets/images/lixnet2-BUcvBH34.png",nt=[{value:"trial",label:"Trial (30 days free)",price:"Free"},{value:"basic",label:"Basic Plan",price:"KES 5,000/month"},{value:"professional",label:"Professional Plan",price:"KES 15,000/month"},{value:"enterprise",label:"Enterprise Plan",price:"Custom pricing"}],tt=["Organization Details","Admin Account","Review"];function st(){const n=ne(),[a,r]=Z.useState(0),[l,i]=Z.useState(!1),[o,d]=Z.useState(""),[h,x]=Z.useState(!1),[m,u]=Z.useState(null),[p,f]=Z.useState({organization_name:"",organization_code:"",subscription_plan:"trial",phone:"",address:"",admin_first_name:"",admin_last_name:"",admin_email:"",admin_username:"",admin_password:"",confirm_password:""}),P=e=>{const{name:n,value:t}=e.target;f(e=>({...e,[n]:t})),d("")};return h?e.jsx(t,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#ffffff"},children:e.jsx(j,{maxWidth:"sm",children:e.jsxs(b,{elevation:3,sx:{p:4,textAlign:"center"},children:[e.jsx(t,{sx:{mb:3},children:e.jsx("img",{src:et,alt:"Lixnet Logo",style:{width:"180px",height:"auto"}})}),e.jsx(s,{variant:"h4",gutterBottom:!0,color:"success.main",children:"ðŸŽ‰ Registration Successful!"}),e.jsxs(g,{severity:"success",sx:{mt:2,mb:3,textAlign:"left"},children:[e.jsxs(s,{variant:"body1",gutterBottom:!0,children:["Your organization ",e.jsx("strong",{children:m.organization})," has been registered successfully!"]}),e.jsx(s,{variant:"body2",children:"A welcome email has been sent to your email address."})]}),e.jsxs(t,{sx:{bgcolor:"#f5f5f5",p:2,borderRadius:1,mb:3},children:[e.jsx(s,{variant:"subtitle2",color:"text.secondary",children:"Your Login Credentials:"}),e.jsxs(s,{children:[e.jsx("strong",{children:"Username:"})," ",m.username]}),e.jsx(s,{variant:"caption",color:"text.secondary",children:"Use the password you created during registration"})]}),e.jsx(v,{variant:"contained",fullWidth:!0,size:"large",onClick:()=>n("/"),sx:{bgcolor:"#1976d2","&:hover":{bgcolor:"#1565c0"}},children:"Go to Login"})]})})}):e.jsx(t,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#ffffff",py:4},children:e.jsx(j,{maxWidth:"md",children:e.jsxs(b,{elevation:3,sx:{p:4},children:[e.jsxs(t,{sx:{mb:3,textAlign:"center"},children:[e.jsx("img",{src:et,alt:"Lixnet Logo",style:{width:"180px",height:"auto",marginBottom:"20px"}}),e.jsx(s,{variant:"h4",gutterBottom:!0,children:"Create Your Organization"}),e.jsx(s,{color:"text.secondary",children:"Start managing your payroll in minutes"})]}),e.jsx(_,{activeStep:a,sx:{mb:4},children:tt.map(n=>e.jsx(C,{children:e.jsx(S,{children:n})},n))}),o&&e.jsx(g,{severity:"error",sx:{mb:2},children:o}),e.jsx(t,{sx:{mb:3},children:(n=>{var a;switch(n){case 0:return e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Organization Name",name:"organization_name",value:p.organization_name,onChange:P,required:!0,placeholder:"e.g., Acme Corporation Ltd"})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Organization Code",name:"organization_code",value:p.organization_code,onChange:P,required:!0,placeholder:"e.g., ACME001",helperText:"3-10 uppercase alphanumeric characters",inputProps:{style:{textTransform:"uppercase"}}})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Subscription Plan",name:"subscription_plan",value:p.subscription_plan,onChange:P,children:nt.map(n=>e.jsxs(c,{value:n.value,children:[n.label," - ",n.price]},n.value))})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Phone Number",name:"phone",value:p.phone,onChange:P,placeholder:"+254712345678"})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Address",name:"address",value:p.address,onChange:P,multiline:!0,rows:2,placeholder:"Physical address"})})]});case 1:return e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"First Name",name:"admin_first_name",value:p.admin_first_name,onChange:P,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Last Name",name:"admin_last_name",value:p.admin_last_name,onChange:P,required:!0})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Email Address",name:"admin_email",type:"email",value:p.admin_email,onChange:P,required:!0,placeholder:"admin@company.com"})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Username",name:"admin_username",value:p.admin_username,onChange:P,required:!0,placeholder:"Choose a username"})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Password",name:"admin_password",type:"password",value:p.admin_password,onChange:P,required:!0,helperText:"At least 8 characters"})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Confirm Password",name:"confirm_password",type:"password",value:p.confirm_password,onChange:P,required:!0})})]});case 2:return e.jsxs(t,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Review Your Information"}),e.jsxs(t,{sx:{mt:2},children:[e.jsx(s,{variant:"subtitle2",color:"primary",children:"Organization Details"}),e.jsxs(s,{children:["Name: ",e.jsx("strong",{children:p.organization_name})]}),e.jsxs(s,{children:["Code: ",e.jsx("strong",{children:p.organization_code})]}),e.jsxs(s,{children:["Plan: ",e.jsx("strong",{children:null==(a=nt.find(e=>e.value===p.subscription_plan))?void 0:a.label})]}),e.jsx(s,{variant:"subtitle2",color:"primary",sx:{mt:2},children:"Admin Account"}),e.jsxs(s,{children:["Name: ",e.jsxs("strong",{children:[p.admin_first_name," ",p.admin_last_name]})]}),e.jsxs(s,{children:["Email: ",e.jsx("strong",{children:p.admin_email})]}),e.jsxs(s,{children:["Username: ",e.jsx("strong",{children:p.admin_username})]})]})]});default:return"Unknown step"}})(a)}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(v,{disabled:0===a||l,onClick:()=>{r(e=>e-1),d("")},children:"Back"}),e.jsx(t,{children:a===tt.length-1?e.jsx(v,{variant:"contained",onClick:async()=>{i(!0),d("");try{const e=await fetch("http://localhost/api/api/organization_signup.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organization_name:p.organization_name,organization_code:p.organization_code,subscription_plan:p.subscription_plan,phone:p.phone,address:p.address,admin_first_name:p.admin_first_name,admin_last_name:p.admin_last_name,admin_email:p.admin_email,admin_username:p.admin_username,admin_password:p.admin_password})}),n=await e.json();n.success?(x(!0),u({username:n.data.admin_username,organization:n.data.organization_name})):d(n.message||"Registration failed. Please try again.")}catch(e){d("Network error. Please check your connection and try again.")}finally{i(!1)}},disabled:l,sx:{bgcolor:"#1976d2","&:hover":{bgcolor:"#1565c0"}},children:l?e.jsx(w,{size:24}):"Complete Registration"}):e.jsx(v,{variant:"contained",onClick:()=>{(e=>{switch(e){case 0:return p.organization_name.trim()?p.organization_code.trim()?!!/^[A-Z0-9]{3,10}$/.test(p.organization_code)||(d("Organization code must be 3-10 uppercase alphanumeric characters (e.g., ABC123)"),!1):(d("Organization code is required"),!1):(d("Organization name is required"),!1);case 1:return p.admin_first_name.trim()&&p.admin_last_name.trim()?p.admin_email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.admin_email)?p.admin_username.trim()?p.admin_password.length<8?(d("Password must be at least 8 characters"),!1):p.admin_password===p.confirm_password||(d("Passwords do not match"),!1):(d("Admin username is required"),!1):(d("Invalid email address"),!1):(d("Admin email is required"),!1):(d("Admin name is required"),!1);default:return!0}})(a)&&r(e=>e+1)},sx:{bgcolor:"#1976d2","&:hover":{bgcolor:"#1565c0"}},children:"Next"})})]}),e.jsx(t,{sx:{mt:3,textAlign:"center"},children:e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",e.jsx(v,{onClick:()=>n("/"),sx:{textTransform:"none"},children:"Login here"})]})})]})})})}function at(){const[n,a]=Z.useState(""),[r,i]=Z.useState(""),[o,c]=Z.useState(""),[d,h]=Z.useState(!1),[x,m]=Z.useState(!1),[u,p]=Z.useState(!1),[_,C]=Z.useState(""),[S,w]=Z.useState(!1),k=ne();return e.jsx(t,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",background:"#f5f7fa",py:4},children:e.jsx(j,{component:"main",maxWidth:"sm",children:e.jsxs(b,{elevation:3,sx:{p:5,borderRadius:2},children:[e.jsxs(t,{sx:{textAlign:"center",mb:4},children:[e.jsx(Ae,{sx:{fontSize:60,color:"#2c5282",mb:2}}),e.jsx(s,{component:"h1",variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Change Password"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"For security reasons, you must change your password"})]}),_&&e.jsx(g,{severity:"error",sx:{mb:3},children:_}),e.jsxs(t,{component:"form",onSubmit:async e=>{var t,s;if(e.preventDefault(),C(""),r.length<8)C("Password must be at least 8 characters long");else if(r===o)if(r!==n){w(!0);try{await $n.changePassword(n,r),localStorage.removeItem("forcePasswordChange"),qn.success("Password changed successfully!"),k("/employee/portal")}catch(a){C((null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.message)||"Failed to change password")}finally{w(!1)}}else C("New password must be different from current password");else C("New passwords do not match")},children:[e.jsx(y,{margin:"normal",required:!0,fullWidth:!0,name:"currentPassword",label:"Current Password",type:d?"text":"password",value:n,onChange:e=>a(e.target.value),disabled:S,InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(l,{onClick:()=>h(!d),edge:"end",children:d?e.jsx(Ee,{}):e.jsx(We,{})})})},sx:{mb:2}}),e.jsx(y,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"New Password",type:x?"text":"password",value:r,onChange:e=>i(e.target.value),disabled:S,helperText:"At least 8 characters",InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(l,{onClick:()=>m(!x),edge:"end",children:x?e.jsx(Ee,{}):e.jsx(We,{})})})},sx:{mb:2}}),e.jsx(y,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm New Password",type:u?"text":"password",value:o,onChange:e=>c(e.target.value),disabled:S,InputProps:{endAdornment:e.jsx(f,{position:"end",children:e.jsx(l,{onClick:()=>p(!u),edge:"end",children:u?e.jsx(Ee,{}):e.jsx(We,{})})})},sx:{mb:3}}),e.jsx(v,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:S,sx:{py:1.5,backgroundColor:"#2c5282","&:hover":{backgroundColor:"#1a365d"}},children:S?"Changing Password...":"Change Password"})]}),e.jsxs(t,{sx:{mt:4,textAlign:"center"},children:[e.jsx(s,{variant:"caption",display:"block",color:"text.secondary",children:"Password Requirements:"}),e.jsx(s,{variant:"caption",display:"block",color:"text.secondary",children:"â€¢ At least 8 characters â€¢ Mix of letters and numbers recommended"})]})]})})})}const rt="/employer/employees.php",lt="/employee/profile.php",it={getAllEmployees:async(e={})=>{try{return(await Bn.get(rt,{params:e})).data}catch(n){throw n}},getEmployee:async(e=null)=>{try{if("employee"===localStorage.getItem("userType")){return(await Bn.get(lt)).data}return(await Bn.get(rt,{params:{id:e}})).data}catch(n){throw n}},getMyProfile:async()=>{try{return(await Bn.get(lt)).data}catch(e){throw e}},createEmployee:async e=>{try{return(await Bn.post(rt,e)).data}catch(n){throw n}},updateEmployee:async e=>{try{if("employee"===localStorage.getItem("userType")){const n={phone:e.phone,personal_email:e.personal_email,emergency_contact_name:e.emergency_contact_name,emergency_contact_phone:e.emergency_contact_phone};return(await Bn.put(lt,n)).data}return(await Bn.put(rt,e)).data}catch(n){throw n}},deleteEmployee:async e=>{try{return(await Bn.delete(`${rt}?id=${e}`)).data}catch(n){throw n}},searchEmployees:async e=>{try{return(await Bn.get(rt,{params:{search:e}})).data}catch(n){throw n}},updateMyProfile(e){const n={phone:e.phone,personal_email:e.personal_email,emergency_contact_name:e.emergency_contact_name,emergency_contact_phone:e.emergency_contact_phone};return Bn.put(lt,n)}};const ot=new class{async getPayroll(e,n){try{return(await Bn.get("/payroll.php",{params:{action:"get_payroll",month:e,year:n}})).data}catch(t){throw t}}async getPayslip(e,n,t){try{return(await Bn.get("/payroll.php",{params:{action:"get_payslip",employee_id:e,month:n,year:t}})).data}catch(s){throw s}}async downloadPayslip(e,n,t){try{return await Bn.get("/payroll.php",{params:{action:"download_payslip",employee_id:e,month:n,year:t},responseType:"blob"})}catch(s){throw s}}async generateEmployeePayroll(e,n,t){try{return(await Bn.post("/payroll.php",{action:"generate_payroll",employee_id:e,month:n,year:t})).data}catch(s){throw s}}async generateBulkPayroll(e,n){try{return(await Bn.post("/payroll.php",{action:"generate_bulk_payroll",month:e,year:n})).data}catch(t){throw t}}async approvePayroll(e){try{return(await Bn.put("/payroll.php",{action:"approve_payroll",payroll_id:e})).data}catch(n){throw n}}async processPayment(e,n="bank_transfer"){try{return(await Bn.put("/payroll.php",{action:"process_payment",payroll_id:e,payment_method:n})).data}catch(t){throw t}}async sendPayslip(e,n,t){try{return(await Bn.post("/payroll.php",{action:"send_payslip",employee_id:e,month:n,year:t})).data}catch(s){throw s}}async getPayrollSummary(e,n){try{return(await Bn.get("/payroll.php",{params:{action:"get_summary",month:e,year:n}})).data}catch(t){throw t}}async generateReport(e,n,t){try{return await Bn.get("/payroll.php",{params:{action:"generate_report",report_type:e,month:n,year:t},responseType:"blob"})}catch(s){throw s}}async getMyPayslips(){const e=await Bn.get("/payroll.php?action=my_payslips");return e.data.data=e.data.data||[]}};function ct(){const n=ne(),[a,r]=Z.useState(null),i=(new Date).getMonth()+1,o=(new Date).getFullYear(),{data:c}=he("employees",it.getAllEmployees),d=(null==c?void 0:c.records)||[];Z.useEffect(()=>{h()},[]);const h=async()=>{try{const e=await ot.getPayrollSummary(i,o);e.success&&r(e.data)}catch(e){}},x=d.filter(e=>"active"===e.employment_status).length,m=d.length,u=d.filter(e=>"on_leave"===e.employment_status).length,p=d.filter(e=>"active"===e.employment_status).reduce((e,n)=>e+(parseFloat(n.basic_salary)||0),0),j=[{title:"Total Employees",value:m,icon:e.jsx(be,{sx:{fontSize:40}}),color:"#1a365d",change:"+5%"},{title:"Active Employees",value:x,icon:e.jsx(Te,{sx:{fontSize:40}}),color:"#2e7d32",change:"+2%"},{title:"Monthly Payroll",value:`KES ${p.toLocaleString()}`,icon:e.jsx(Re,{sx:{fontSize:40}}),color:"#d4af37",change:"+3%"},{title:"On Leave",value:u,icon:e.jsx(Ce,{sx:{fontSize:40}}),color:"#ed6c02",change:"-1%"}];return e.jsxs(t,{children:[e.jsxs(t,{mb:4,children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600,mb:1},children:"Dashboard Overview"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Welcome back! Here's what's happening with your organization today."})]}),e.jsx(k,{container:!0,spacing:3,mb:4,children:j.map((n,a)=>e.jsx(k,{item:!0,xs:12,sm:6,md:3,children:e.jsx(P,{sx:{background:`linear-gradient(135deg, ${n.color} 0%, ${n.color}dd 100%)`,color:"white",position:"relative",overflow:"hidden"},children:e.jsx(I,{children:e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[e.jsxs(t,{children:[e.jsx(s,{variant:"body2",sx:{opacity:.9,mb:1},children:n.title}),e.jsx(s,{variant:"h4",sx:{fontWeight:700,mb:.5},children:n.value}),e.jsxs(t,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(De,{sx:{fontSize:16}}),e.jsxs(s,{variant:"caption",children:[n.change," from last month"]})]})]}),e.jsx(t,{sx:{opacity:.3},children:n.icon})]})})})},a))}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,md:8,children:e.jsxs(b,{sx:{p:3},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Department Overview"}),e.jsx(l,{size:"small",onClick:()=>n("/employees"),children:e.jsx(Le,{})})]}),e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Department"}),e.jsx(R,{align:"right",children:"Employees"}),e.jsx(R,{align:"right",children:"Monthly Budget"}),e.jsx(R,{align:"right",children:"Utilization"})]})}),e.jsx(D,{children:[{name:"IT",employees:25,budget:25e5,utilization:85},{name:"Finance",employees:15,budget:18e5,utilization:92},{name:"HR",employees:10,budget:12e5,utilization:78},{name:"Operations",employees:30,budget:28e5,utilization:88}].map(n=>e.jsxs(T,{children:[e.jsx(R,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(_e,{color:"action"}),e.jsx(s,{variant:"body2",fontWeight:600,children:n.name})]})}),e.jsx(R,{align:"right",children:n.employees}),e.jsxs(R,{align:"right",children:["KES ",n.budget.toLocaleString()]}),e.jsx(R,{align:"right",children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(L,{variant:"determinate",value:n.utilization,sx:{width:60,height:6,borderRadius:3}}),e.jsxs(s,{variant:"body2",children:[n.utilization,"%"]})]})})]},n.name))})]})})]})}),e.jsx(k,{item:!0,xs:12,md:4,children:e.jsxs(b,{sx:{p:3},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Recent Activity"}),e.jsx(t,{display:"flex",flexDirection:"column",gap:2,children:[{id:1,action:"New Employee Added",name:"John Doe",time:"2 hours ago",type:"employee"},{id:2,action:"Leave Request Approved",name:"Jane Smith",time:"3 hours ago",type:"leave"},{id:3,action:"Payroll Generated",name:"October 2025",time:"1 day ago",type:"payroll"},{id:4,action:"Performance Review",name:"Bob Johnson",time:"2 days ago",type:"performance"}].map(n=>e.jsxs(t,{display:"flex",gap:2,p:2,sx:{bgcolor:"background.default",borderRadius:2,"&:hover":{bgcolor:"action.hover"}},children:[e.jsxs(t,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:"primary.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:["employee"===n.type&&e.jsx(be,{}),"leave"===n.type&&e.jsx(Ce,{}),"payroll"===n.type&&e.jsx(Re,{}),"performance"===n.type&&e.jsx(we,{})]}),e.jsxs(t,{flex:1,children:[e.jsx(s,{variant:"body2",fontWeight:600,children:n.action}),e.jsx(s,{variant:"caption",color:"text.secondary",children:n.name}),e.jsx(s,{variant:"caption",display:"block",color:"text.secondary",children:n.time})]})]},n.id))})]})}),e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(b,{sx:{p:3},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"This Month's Payroll"}),e.jsx(l,{size:"small",onClick:()=>n("/security"),children:e.jsx(Le,{})})]}),a?e.jsxs(t,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",p:2,sx:{bgcolor:"background.default",borderRadius:2},children:[e.jsx(s,{variant:"body2",children:"Gross Pay"}),e.jsxs(s,{variant:"body2",fontWeight:600,children:["KES ",parseFloat(a.total_gross_pay||0).toLocaleString()]})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",p:2,sx:{bgcolor:"background.default",borderRadius:2},children:[e.jsx(s,{variant:"body2",children:"Total Deductions"}),e.jsxs(s,{variant:"body2",fontWeight:600,children:["KES ",parseFloat(a.total_deductions||0).toLocaleString()]})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",p:2,sx:{bgcolor:"primary.main",color:"white",borderRadius:2},children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"Net Pay"}),e.jsxs(s,{variant:"body1",fontWeight:700,children:["KES ",parseFloat(a.total_net_pay||0).toLocaleString()]})]})]}):e.jsx(t,{textAlign:"center",py:4,children:e.jsx(s,{variant:"body2",color:"text.secondary",children:"No payroll data for this month"})})]})}),e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(b,{sx:{p:3},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Quick Actions"}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:6,children:e.jsx(P,{sx:{cursor:"pointer","&:hover":{boxShadow:3,transform:"translateY(-2px)"},transition:"all 0.3s"},onClick:()=>n("/employees/new"),children:e.jsxs(I,{sx:{textAlign:"center"},children:[e.jsx(be,{sx:{fontSize:40,color:"primary.main",mb:1}}),e.jsx(s,{variant:"body2",fontWeight:600,children:"Add Employee"})]})})}),e.jsx(k,{item:!0,xs:6,children:e.jsx(P,{sx:{cursor:"pointer","&:hover":{boxShadow:3,transform:"translateY(-2px)"},transition:"all 0.3s"},onClick:()=>n("/security"),children:e.jsxs(I,{sx:{textAlign:"center"},children:[e.jsx(Re,{sx:{fontSize:40,color:"primary.main",mb:1}}),e.jsx(s,{variant:"body2",fontWeight:600,children:"Process Payroll"})]})})}),e.jsx(k,{item:!0,xs:6,children:e.jsx(P,{sx:{cursor:"pointer","&:hover":{boxShadow:3,transform:"translateY(-2px)"},transition:"all 0.3s"},onClick:()=>n("/leave"),children:e.jsxs(I,{sx:{textAlign:"center"},children:[e.jsx(Ce,{sx:{fontSize:40,color:"primary.main",mb:1}}),e.jsx(s,{variant:"body2",fontWeight:600,children:"Manage Leave"})]})})}),e.jsx(k,{item:!0,xs:6,children:e.jsx(P,{sx:{cursor:"pointer","&:hover":{boxShadow:3,transform:"translateY(-2px)"},transition:"all 0.3s"},onClick:()=>n("/reports"),children:e.jsxs(I,{sx:{textAlign:"center"},children:[e.jsx(we,{sx:{fontSize:40,color:"primary.main",mb:1}}),e.jsx(s,{variant:"body2",fontWeight:600,children:"View Reports"})]})})})]})]})})]})]})}function dt(){const[n,a]=Z.useState(""),r=ne(),{data:i,isLoading:o,error:c}=he("employees",it.getAllEmployees),d=((null==i?void 0:i.data)||[]).filter(e=>{var t,s,a;return(null==(t=e.full_name)?void 0:t.toLowerCase().includes(n.toLowerCase()))||(null==(s=e.employee_no)?void 0:s.toLowerCase().includes(n.toLowerCase()))||(null==(a=e.department_name)?void 0:a.toLowerCase().includes(n.toLowerCase()))});return e.jsxs(t,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600},children:"Employees"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(ze,{}),onClick:()=>r("/employer/employees/new"),sx:{bgcolor:"#1976d2",borderRadius:"6px",padding:"6px 16px",fontSize:"13px",textTransform:"none",fontWeight:500,"&:hover":{bgcolor:"#1565c0"}},children:"Add Employee"})]}),e.jsx(b,{sx:{p:2,mb:2},children:e.jsx(y,{fullWidth:!0,placeholder:"Search employees by name, number, or department...",value:n,onChange:e=>a(e.target.value),InputProps:{startAdornment:e.jsx(Ne,{sx:{mr:1,color:"action.active"}})}})}),e.jsx(E,{component:b,children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Employee #"}),e.jsx(R,{children:"Full Name"}),e.jsx(R,{children:"Department"}),e.jsx(R,{children:"Position"}),e.jsx(R,{children:"Phone"}),e.jsx(R,{children:"Email"}),e.jsx(R,{children:"Status"}),e.jsx(R,{align:"center",children:"Actions"})]})}),e.jsx(D,{children:o?e.jsx(T,{children:e.jsx(R,{colSpan:8,align:"center",children:"Loading..."})}):0===d.length?e.jsx(T,{children:e.jsx(R,{colSpan:8,align:"center",children:"No employees found"})}):d.map(n=>{return e.jsxs(T,{hover:!0,children:[e.jsx(R,{children:n.employee_no})," ",e.jsx(R,{children:n.full_name}),e.jsx(R,{children:n.department_name}),e.jsx(R,{children:n.position_title}),e.jsx(R,{children:n.phone})," ",e.jsx(R,{children:n.work_email}),e.jsx(R,{children:e.jsx(z,{label:n.employment_status,color:(t=n.employment_status,{active:"success",on_leave:"warning",suspended:"error",terminated:"default"}[t]||"default"),size:"small"})}),e.jsxs(R,{align:"center",children:[e.jsx(l,{size:"small",onClick:()=>r(`/employer/employees/${n.id}`),title:"View Employee Details",children:e.jsx(We,{})}),e.jsx(l,{size:"small",onClick:()=>r(`/employer/employees/${n.id}/edit`),title:"Edit Employee",children:e.jsx(Fe,{})})]})]},n.id);var t})})]})})]})}const ht=()=>Bn.get("/employer/departments.php"),xt=(e,n)=>Bn.post("/employer/departments.php?action=assignEmployee",{department_id:e,employee_id:n}),mt=()=>Bn.get("/employer/positions.php"),ut=e=>Bn.post("/employer/positions.php",e),pt={bgcolor:"#1976d2",borderRadius:"12px",padding:"6px 16px",fontSize:"13px",textTransform:"none",fontWeight:500,"&:hover":{bgcolor:"#1565c0"}};function jt(){const n=ne(),[r,l]=Z.useState({employee_no:"",first_name:"",middle_name:"",last_name:"",id_number:"",kra_pin:"",nssf_no:"",nhif_no:"",shif_number:"",phone:"",personal_email:"",work_email:"",date_of_birth:"",gender:"",residential_address:"",postal_address:"",nationality:"Kenyan",employment_type:"Permanent",employment_status:"Active",hire_date:"",department_id:"",position_id:"",basic_salary:"",currency:"KES"}),[i,o]=Z.useState([]),[d,h]=Z.useState([]),[x,m]=Z.useState({});Z.useEffect(()=>{!async function(){var e,n;try{const[t,s]=await Promise.all([ht(),mt()]);o((null==(e=t.data)?void 0:e.data)||[]),h((null==(n=s.data)?void 0:n.data)||[])}catch(t){qn.error("Failed to load dropdown data")}}()},[]);const u=xe(it.createEmployee,{onSuccess:()=>{qn.success("Employee added successfully!"),n("/employer/employees")},onError:e=>{var n,t;qn.error((null==(t=null==(n=e.response)?void 0:n.data)?void 0:t.message)||"Failed to add employee")}}),p=e=>{const{name:n,value:t}=e.target;l(e=>({...e,[n]:t})),x[n]&&m(e=>({...e,[n]:null}))};return e.jsxs(t,{children:[e.jsx(t,{display:"flex",justifyContent:"space-between",mb:3,children:e.jsx(s,{variant:"h4",fontWeight:600,children:"Add New Employee"})}),e.jsx(b,{sx:{p:4},children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return r.employee_no||(e.employee_no="Employee number is required"),r.first_name||(e.first_name="First name is required"),r.last_name||(e.last_name="Last name is required"),r.phone||(e.phone="Phone is required"),r.date_of_birth||(e.date_of_birth="Date of birth is required"),r.gender||(e.gender="Gender is required"),r.work_email||(e.work_email="Work email is required"),r.hire_date||(e.hire_date="Hire date is required"),r.department_id||(e.department_id="Department is required"),r.position_id||(e.position_id="Position is required"),m(e),0===Object.keys(e).length})()?u.mutate(r):qn.error("Please fix validation errors")},children:[e.jsx(s,{variant:"h6",sx:{color:"primary.main",mb:1},children:"Personal Information"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Employee Number",fullWidth:!0,name:"employee_no",value:r.employee_no,onChange:p,error:!!x.employee_no,helperText:x.employee_no,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"First Name",fullWidth:!0,name:"first_name",value:r.first_name,onChange:p,error:!!x.first_name,helperText:x.first_name,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Middle Name",fullWidth:!0,name:"middle_name",value:r.middle_name,onChange:p})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Last Name",fullWidth:!0,name:"last_name",value:r.last_name,onChange:p,error:!!x.last_name,helperText:x.last_name,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"National ID",fullWidth:!0,name:"id_number",value:r.id_number,onChange:p})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Phone Number",fullFull:!0,name:"phone",value:r.phone,onChange:p,error:!!x.phone,helperText:x.phone,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"Personal Email",fullWidth:!0,name:"personal_email",value:r.personal_email,onChange:p})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"Work Email",fullWidth:!0,name:"work_email",value:r.work_email,onChange:p,error:!!x.work_email,helperText:x.work_email,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Date of Birth",type:"date",fullWidth:!0,name:"date_of_birth",InputLabelProps:{shrink:!0},value:r.date_of_birth,onChange:p,error:!!x.date_of_birth,helperText:x.date_of_birth,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(y,{select:!0,fullWidth:!0,label:"Gender",name:"gender",value:r.gender,onChange:p,error:!!x.gender,helperText:x.gender,required:!0,children:[e.jsx(c,{value:"Male",children:"Male"}),e.jsx(c,{value:"Female",children:"Female"})]})})]}),e.jsx(s,{variant:"h6",sx:{color:"primary.main",mt:4},children:"Employment Information"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(y,{select:!0,fullWidth:!0,label:"Employment Type",name:"employment_type",value:r.employment_type,onChange:p,children:[e.jsx(c,{value:"Permanent",children:"Permanent"}),e.jsx(c,{value:"Contract",children:"Contract"}),e.jsx(c,{value:"Temporary",children:"Temporary"})]})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(y,{select:!0,fullWidth:!0,label:"Status",name:"employment_status",value:r.employment_status,onChange:p,children:[e.jsx(c,{value:"Active",children:"Active"}),e.jsx(c,{value:"Suspended",children:"Suspended"}),e.jsx(c,{value:"Terminated",children:"Terminated"})]})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Hire Date",type:"date",fullWidth:!0,name:"hire_date",InputLabelProps:{shrink:!0},value:r.hire_date,onChange:p,error:!!x.hire_date,helperText:x.hire_date,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{select:!0,label:"Department",fullWidth:!0,name:"department_id",value:r.department_id,onChange:p,error:!!x.department_id,helperText:x.department_id,required:!0,children:i.map(n=>e.jsx(c,{value:n.id,children:n.name},n.id))})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{select:!0,label:"Position",fullWidth:!0,name:"position_id",value:r.position_id,onChange:p,error:!!x.position_id,helperText:x.position_id,required:!0,children:d.map(n=>e.jsx(c,{value:n.id,children:n.title},n.id))})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Salary",fullWidth:!0,type:"number",name:"basic_salary",value:r.basic_salary,onChange:p})})]}),e.jsxs(t,{display:"flex",justifyContent:"flex-end",gap:2,mt:4,children:[e.jsx(v,{variant:"outlined",startIcon:e.jsx(Me,{}),onClick:()=>n("/employer/employees"),children:"Cancel"}),e.jsx(v,{type:"submit",variant:"contained",startIcon:e.jsx(Oe,{}),sx:pt,children:"Save Employee"})]})]})})]})}const gt="/employee/documents.php",yt=async(e,n="")=>{const t=new FormData;t.append("file",e),t.append("title",n);return(await Bn.post(gt,t,{headers:{"Content-Type":"multipart/form-data"}})).data},ft=async()=>(await Bn.get(gt)).data,vt=async e=>(await Bn.get(`/employer/employee_documents.php?employee_id=${e}`)).data;function bt(){var n,r;const{id:l}=ae(),[o,c]=Z.useState(null),[d,h]=Z.useState(!0),[x,m]=Z.useState([]),[u,p]=Z.useState(!0),j=ne();if(Z.useEffect(()=>{!async function(){try{const e=await it.getEmployee(l);e.success&&c(e.data)}catch(e){}finally{h(!1)}}()},[l]),Z.useEffect(()=>{!async function(){try{const e=await vt(l);e.success&&m(e.data)}catch(e){}finally{p(!1)}}()},[l]),d)return e.jsx(w,{});if(!o)return e.jsx(s,{children:"No employee found"});const g=`${(null==(n=o.first_name)?void 0:n.charAt(0))||""}${(null==(r=o.last_name)?void 0:r.charAt(0))||""}`;return e.jsxs(t,{children:[e.jsxs(P,{sx:{p:3,mb:3,display:"flex",alignItems:"center",gap:3,borderRadius:3},children:[e.jsx(i,{sx:{width:70,height:70,bgcolor:"primary.main",fontSize:32},children:g}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",fontWeight:700,children:o.full_name}),e.jsxs(s,{color:"text.secondary",children:[o.position_title," â€” ",o.department_name]})]}),e.jsx(v,{variant:"outlined",sx:{ml:"auto"},onClick:()=>j(`/employer/employees/${o.id}/salary-structure`),children:"Manage Salary Structure"})]}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,md:6,children:e.jsx(P,{sx:{borderRadius:3},children:e.jsxs(I,{children:[e.jsx(s,{variant:"h6",sx:{mb:1},children:"Personal Information"}),e.jsx(a,{sx:{mb:2}}),e.jsxs(N,{spacing:1.2,children:[e.jsxs(s,{children:[e.jsx("strong",{children:"Employee No:"})," ",o.employee_no]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Email:"})," ",o.work_email]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Phone:"})," ",o.phone]}),e.jsxs(s,{children:[e.jsx("strong",{children:"DOB:"})," ",o.date_of_birth]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Gender:"})," ",o.gender]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Nationality:"})," ",o.nationality]})]})]})})}),e.jsx(k,{item:!0,xs:12,md:6,children:e.jsx(P,{sx:{borderRadius:3},children:e.jsxs(I,{children:[e.jsx(s,{variant:"h6",sx:{mb:1},children:"Job Information"}),e.jsx(a,{sx:{mb:2}}),e.jsxs(N,{spacing:1.2,children:[e.jsxs(s,{children:[e.jsx("strong",{children:"Department:"})," ",o.department_name]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Position:"})," ",o.position_title]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Manager:"})," ",o.manager_name]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Status:"})," ",o.employment_status]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Employment Type:"})," ",o.employment_type]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Salary:"})," ",o.currency," ",o.basic_salary]}),e.jsxs(s,{children:[e.jsx("strong",{children:"Hire Date:"})," ",o.hire_date]})]})]})})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(P,{sx:{borderRadius:3},children:e.jsxs(I,{children:[e.jsx(s,{variant:"h6",sx:{mb:1},children:"Employee Documents"}),e.jsx(a,{sx:{mb:2}}),u?e.jsx(w,{}):0===x.length?e.jsx(s,{children:"No documents uploaded."}):e.jsx(N,{spacing:1.5,children:x.map(n=>{const a=`${"https://evolvepayroll.co.ke/api".replace("/api","")}/${n.file_path.startsWith("/")?n.file_path.substring(1):n.file_path}`;return e.jsxs(t,{sx:{p:2,border:"1px solid #eee",borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#fafafa"},children:[e.jsxs(t,{children:[e.jsx(s,{fontWeight:600,children:n.title}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Uploaded: ",n.uploaded_at]})]}),e.jsx("a",{href:a,target:"_blank",rel:"noreferrer",style:{textDecoration:"none",color:"#1976d2",fontWeight:"bold"},children:"View"})]},n.id)})})]})})})]})]})}function _t(){const[n,a]=Z.useState(0),[r,i]=Z.useState(!1),[o,d]=Z.useState(!1),[h,x]=Z.useState(()=>{const e=localStorage.getItem("jobPostings");return e?JSON.parse(e):[]}),[m,u]=Z.useState(()=>{const e=localStorage.getItem("applicants");return e?JSON.parse(e):[]}),[p,j]=Z.useState({title:"",department:"",location:"",employment_type:"full_time",salary_range:"",description:"",requirements:"",deadline:"",status:"open"}),[g,f]=Z.useState({job_id:"",full_name:"",email:"",phone:"",experience_years:"",education:"",resume_link:"",status:"pending"}),_=e=>{const{name:n,value:t}=e.target;j(e=>({...e,[n]:t}))},C=e=>{const{name:n,value:t}=e.target;f(e=>({...e,[n]:t}))},S=e=>({open:"success",closed:"error",pending:"warning",shortlisted:"info",rejected:"error",hired:"success"}[e]||"default");return e.jsxs(t,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600},children:"Recruitment Management"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(ze,{}),onClick:()=>0===n?i(!0):d(!0),sx:pt,children:0===n?"Post Job":"Add Applicant"})]}),e.jsxs(F,{value:n,onChange:(e,n)=>a(n),sx:{mb:3},children:[e.jsx(M,{label:"Job Postings"}),e.jsx(M,{label:"Applicants"}),e.jsx(M,{label:"Interviews"})]}),0===n&&e.jsx(E,{component:b,children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"ID"}),e.jsx(R,{children:"Job Title"}),e.jsx(R,{children:"Department"}),e.jsx(R,{children:"Location"}),e.jsx(R,{children:"Type"}),e.jsx(R,{children:"Salary Range"}),e.jsx(R,{children:"Posted Date"}),e.jsx(R,{children:"Deadline"}),e.jsx(R,{children:"Applicants"}),e.jsx(R,{children:"Status"}),e.jsx(R,{align:"center",children:"Actions"})]})}),e.jsx(D,{children:0===h.length?e.jsx(T,{children:e.jsx(R,{colSpan:11,align:"center",children:"No job postings found"})}):h.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.id}),e.jsx(R,{children:n.title}),e.jsx(R,{children:n.department}),e.jsx(R,{children:n.location}),e.jsx(R,{children:n.employment_type}),e.jsx(R,{children:n.salary_range}),e.jsx(R,{children:n.posted_date}),e.jsx(R,{children:n.deadline}),e.jsx(R,{children:n.applicants_count||0}),e.jsx(R,{children:e.jsx(z,{label:n.status.toUpperCase(),color:S(n.status),size:"small"})}),e.jsxs(R,{align:"center",children:[e.jsx(l,{size:"small",title:"View Details",children:e.jsx(We,{})}),e.jsx(l,{size:"small",title:"Edit",children:e.jsx(Fe,{})})]})]},n.id))})]})}),1===n&&e.jsx(E,{component:b,children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"ID"}),e.jsx(R,{children:"Full Name"}),e.jsx(R,{children:"Email"}),e.jsx(R,{children:"Phone"}),e.jsx(R,{children:"Job Applied"}),e.jsx(R,{children:"Experience"}),e.jsx(R,{children:"Education"}),e.jsx(R,{children:"Applied Date"}),e.jsx(R,{children:"Status"}),e.jsx(R,{align:"center",children:"Actions"})]})}),e.jsx(D,{children:0===m.length?e.jsx(T,{children:e.jsx(R,{colSpan:10,align:"center",children:"No applicants found"})}):m.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.id}),e.jsx(R,{children:n.full_name}),e.jsx(R,{children:n.email}),e.jsx(R,{children:n.phone}),e.jsx(R,{children:n.job_title}),e.jsxs(R,{children:[n.experience_years," years"]}),e.jsx(R,{children:n.education}),e.jsx(R,{children:n.applied_date}),e.jsx(R,{children:e.jsx(z,{label:n.status.toUpperCase(),color:S(n.status),size:"small"})}),e.jsx(R,{align:"center",children:"pending"===n.status&&e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"small",color:"success",onClick:()=>(e=>{const n=m.map(n=>n.id===e?{...n,status:"shortlisted"}:n);u(n),localStorage.setItem("applicants",JSON.stringify(n)),qn.success("Applicant shortlisted!")})(n.id),title:"Shortlist",children:e.jsx(Te,{})}),e.jsx(l,{size:"small",color:"error",onClick:()=>(e=>{const n=m.map(n=>n.id===e?{...n,status:"rejected"}:n);u(n),localStorage.setItem("applicants",JSON.stringify(n)),qn.success("Applicant rejected!")})(n.id),title:"Reject",children:e.jsx(Me,{})})]})})]},n.id))})]})}),2===n&&e.jsxs(b,{sx:{p:4,textAlign:"center"},children:[e.jsx(s,{variant:"h6",color:"text.secondary",children:"Interview Scheduling Coming Soon"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"This feature will allow you to schedule and manage interviews with shortlisted candidates."})]}),e.jsxs(O,{open:r,onClose:()=>i(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(q,{children:"Post New Job"}),e.jsx(B,{children:e.jsx(t,{sx:{pt:2},children:e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Job Title",name:"title",value:p.title,onChange:_,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Department",name:"department",value:p.department,onChange:_,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Location",name:"location",value:p.location,onChange:_})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsxs(y,{fullWidth:!0,select:!0,label:"Employment Type",name:"employment_type",value:p.employment_type,onChange:_,required:!0,children:[e.jsx(c,{value:"full_time",children:"Full Time"}),e.jsx(c,{value:"part_time",children:"Part Time"}),e.jsx(c,{value:"contract",children:"Contract"}),e.jsx(c,{value:"intern",children:"Internship"})]})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Salary Range",name:"salary_range",value:p.salary_range,onChange:_,placeholder:"e.g. KES 50,000 - 80,000"})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Application Deadline",name:"deadline",type:"date",value:p.deadline,onChange:_,InputLabelProps:{shrink:!0}})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Job Description",name:"description",value:p.description,onChange:_,multiline:!0,rows:4,required:!0})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Requirements",name:"requirements",value:p.requirements,onChange:_,multiline:!0,rows:3})})]})})}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>{if(!p.title||!p.department||!p.description)return void qn.error("Please fill in all required fields");const e={id:h.length+1,...p,posted_date:(new Date).toISOString().split("T")[0],applicants_count:0},n=[...h,e];x(n),localStorage.setItem("jobPostings",JSON.stringify(n)),qn.success("Job posting created successfully!"),i(!1),j({title:"",department:"",location:"",employment_type:"full_time",salary_range:"",description:"",requirements:"",deadline:"",status:"open"})},sx:pt,children:"Post Job"})]})]}),e.jsxs(O,{open:o,onClose:()=>d(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(q,{children:"Add Applicant"}),e.jsx(B,{children:e.jsx(t,{sx:{pt:2},children:e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Job Position",name:"job_id",value:g.job_id,onChange:C,required:!0,children:h.map(n=>e.jsxs(c,{value:n.id,children:[n.title," - ",n.department]},n.id))})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Full Name",name:"full_name",value:g.full_name,onChange:C,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Email",name:"email",type:"email",value:g.email,onChange:C,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Phone",name:"phone",value:g.phone,onChange:C})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Years of Experience",name:"experience_years",type:"number",value:g.experience_years,onChange:C})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Education Level",name:"education",value:g.education,onChange:C})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Resume/CV Link",name:"resume_link",value:g.resume_link,onChange:C,placeholder:"https://..."})})]})})}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>{if(!g.job_id||!g.full_name||!g.email)return void qn.error("Please fill in all required fields");const e=h.find(e=>e.id===parseInt(g.job_id)),n={id:m.length+1,...g,job_title:(null==e?void 0:e.title)||"Unknown",applied_date:(new Date).toISOString().split("T")[0]},t=[...m,n];u(t),localStorage.setItem("applicants",JSON.stringify(t));const s=h.map(e=>e.id===parseInt(g.job_id)?{...e,applicants_count:(e.applicants_count||0)+1}:e);x(s),localStorage.setItem("jobPostings",JSON.stringify(s)),qn.success("Applicant added successfully!"),d(!1),f({job_id:"",full_name:"",email:"",phone:"",experience_years:"",education:"",resume_link:"",status:"pending"})},sx:pt,children:"Add Applicant"})]})]})]})}const Ct=async()=>{try{return(await Bn.get("/employer/leave/applications")).data}catch(e){throw e}},St=async e=>{try{return(await Bn.get("/employer/leave/applications",{params:{employee_id:e}})).data}catch(n){throw n}},wt=async e=>{try{return(await Bn.post("/employee/leave/apply",e)).data}catch(n){throw n}},kt=async(e,n="")=>{try{return(await Bn.put(`/employer/leave/${e}/approve`,{status:"approved",reviewer_comments:n})).data}catch(t){throw t}},Pt=async(e,n="")=>{try{return(await Bn.put(`/employer/leave/${e}/reject`,{status:"rejected",reviewer_comments:n})).data}catch(t){throw t}},It=async(e=null)=>{try{if("employee"===localStorage.getItem("userType")){return(await Bn.get("/employee/leave/balance")).data}return(await Bn.get(`/employer/leave/balance/${e}`)).data}catch(n){throw n}},Et=[{value:"annual",label:"Annual Leave",days:21},{value:"sick",label:"Sick Leave",days:14},{value:"maternity",label:"Maternity Leave",days:90},{value:"paternity",label:"Paternity Leave",days:14},{value:"unpaid",label:"Unpaid Leave",days:0}];function Wt(){const n=me(),[a,r]=Z.useState(!1),[i,o]=Z.useState({employee_id:"",leave_type:"annual",start_date:"",end_date:"",reason:"",status:"pending"}),{data:d}=he("employees",it.getAllEmployees),h=(null==d?void 0:d.records)||[],{data:x,isLoading:m}=he("leaveRequests",Ct,{onError:()=>qn.error("Failed to load leave requests")}),u=(null==x?void 0:x.records)||[],p=xe(e=>wt(e),{onSuccess:()=>{qn.success("Leave application submitted successfully!"),n.invalidateQueries("leaveRequests"),r(!1),o({employee_id:"",leave_type:"annual",start_date:"",end_date:"",reason:"",status:"pending"})},onError:e=>{var n,t;qn.error((null==(t=null==(n=e.response)?void 0:n.data)?void 0:t.message)||"Failed to submit leave application")}}),j=xe(e=>kt(e),{onSuccess:()=>{qn.success("Leave request approved!"),n.invalidateQueries("leaveRequests")},onError:()=>{qn.error("Failed to approve leave request")}}),g=xe(e=>Pt(e),{onSuccess:()=>{qn.success("Leave request rejected!"),n.invalidateQueries("leaveRequests")},onError:()=>{qn.error("Failed to reject leave request")}}),f=e=>{const{name:n,value:t}=e.target;o(e=>({...e,[n]:t}))};return e.jsxs(t,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600},children:"Leave Management"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(ze,{}),onClick:()=>r(!0),sx:pt,children:"Apply for Leave"})]}),e.jsx(E,{component:b,children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"ID"}),e.jsx(R,{children:"Employee #"}),e.jsx(R,{children:"Employee Name"}),e.jsx(R,{children:"Leave Type"}),e.jsx(R,{children:"Start Date"}),e.jsx(R,{children:"End Date"}),e.jsx(R,{children:"Days"}),e.jsx(R,{children:"Reason"}),e.jsx(R,{children:"Status"}),e.jsx(R,{align:"center",children:"Actions"})]})}),e.jsx(D,{children:0===u.length?e.jsx(T,{children:e.jsx(R,{colSpan:10,align:"center",children:"No leave applications found"})}):u.map(n=>{var t,s;return e.jsxs(T,{children:[e.jsx(R,{children:n.id}),e.jsx(R,{children:n.employee_number}),e.jsx(R,{children:n.employee_name}),e.jsx(R,{children:null==(t=Et.find(e=>e.value===n.leave_type))?void 0:t.label}),e.jsx(R,{children:n.start_date}),e.jsx(R,{children:n.end_date}),e.jsx(R,{children:n.days}),e.jsx(R,{children:n.reason}),e.jsx(R,{children:e.jsx(z,{label:n.status.toUpperCase(),color:(s=n.status,{pending:"warning",approved:"success",rejected:"error"}[s]||"default"),size:"small"})}),e.jsx(R,{align:"center",children:"pending"===n.status&&e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"small",color:"success",onClick:()=>{return e=n.id,void(window.confirm("Are you sure you want to approve this leave request?")&&j.mutate(e));var e},title:"Approve",children:e.jsx(qe,{})}),e.jsx(l,{size:"small",color:"error",onClick:()=>{return e=n.id,void(window.confirm("Are you sure you want to reject this leave request?")&&g.mutate(e));var e},title:"Reject",children:e.jsx(Be,{})})]})})]},n.id)})})]})}),e.jsxs(O,{open:a,onClose:()=>r(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(q,{children:"Apply for Leave"}),e.jsx(B,{children:e.jsx(t,{sx:{pt:2},children:e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Employee",name:"employee_id",value:i.employee_id,onChange:f,required:!0,children:h.map(n=>e.jsxs(c,{value:n.id,children:[n.employee_number," - ",n.full_name]},n.id))})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Leave Type",name:"leave_type",value:i.leave_type,onChange:f,required:!0,children:Et.map(n=>e.jsxs(c,{value:n.value,children:[n.label," (",n.days," days)"]},n.value))})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Start Date",name:"start_date",type:"date",value:i.start_date,onChange:f,InputLabelProps:{shrink:!0},required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"End Date",name:"end_date",type:"date",value:i.end_date,onChange:f,InputLabelProps:{shrink:!0},required:!0})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Reason",name:"reason",value:i.reason,onChange:f,multiline:!0,rows:3,required:!0})})]})})}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>r(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>{if(!(i.employee_id&&i.start_date&&i.end_date&&i.reason))return void qn.error("Please fill in all required fields");const e=new Date(i.start_date),n=new Date(i.end_date),t=Math.ceil((n-e)/864e5)+1,s={employee_id:parseInt(i.employee_id),leave_type:i.leave_type,start_date:i.start_date,end_date:i.end_date,days:t,reason:i.reason,status:"pending"};p.mutate(s)},sx:pt,children:"Submit Application"})]})]})]})}function At(){const[n,a]=Z.useState(!1),[r,l]=Z.useState((new Date).toISOString().split("T")[0]),[i,o]=Z.useState(()=>{const e=localStorage.getItem("attendanceRecords");return e?JSON.parse(e):[]}),[d,h]=Z.useState({employee_id:"",date:(new Date).toISOString().split("T")[0],clock_in:"",clock_out:"",overtime_hours:0,status:"present"}),{data:x}=he("employees",it.getAllEmployees),m=(null==x?void 0:x.records)||[],u=e=>{const{name:n,value:t}=e.target;h(e=>({...e,[n]:t}))},p=(e,n)=>{if(!e||!n)return 0;const t=new Date(`2000-01-01 ${e}`),s=(new Date(`2000-01-01 ${n}`)-t)/36e5;return Math.max(0,s.toFixed(2))},j=i.filter(e=>e.date===r);return e.jsxs(t,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600},children:"Attendance & Time Tracking"}),e.jsxs(t,{display:"flex",gap:2,children:[e.jsx(y,{type:"date",size:"small",label:"Date",value:r,onChange:e=>l(e.target.value),InputLabelProps:{shrink:!0},sx:{width:180}}),e.jsx(v,{variant:"contained",startIcon:e.jsx(ze,{}),onClick:()=>a(!0),sx:pt,children:"Mark Attendance"})]})]}),e.jsxs(b,{sx:{p:3,mb:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Quick Clock In/Out"}),e.jsx(k,{container:!0,spacing:2,children:m.filter(e=>"active"===e.employment_status).slice(0,6).map(n=>{const t=i.find(e=>e.employee_id===n.id&&e.date===(new Date).toISOString().split("T")[0]);return e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(b,{sx:{p:2,border:"1px solid #e0e0e0"},children:[e.jsxs(s,{variant:"subtitle2",gutterBottom:!0,children:[n.employee_number," - ",n.full_name]}),!t&&e.jsx(v,{fullWidth:!0,variant:"outlined",color:"success",size:"small",startIcon:e.jsx(Te,{}),onClick:()=>(e=>{const n=m.find(n=>n.id===e),t=(new Date).toTimeString().split(" ")[0].substring(0,5),s={id:i.length+1,employee_id:e,employee_name:(null==n?void 0:n.full_name)||"Unknown",employee_number:(null==n?void 0:n.employee_number)||"N/A",date:(new Date).toISOString().split("T")[0],clock_in:t,clock_out:"",status:"present",hours_worked:0,regular_hours:0,overtime_hours:0},a=[...i,s];o(a),localStorage.setItem("attendanceRecords",JSON.stringify(a)),qn.success(`Clock in recorded for ${null==n?void 0:n.full_name} at ${t}`)})(n.id),children:"Clock In"}),t&&!t.clock_out&&e.jsxs(e.Fragment,{children:[e.jsxs(s,{variant:"caption",display:"block",color:"text.secondary",children:["Clocked in at ",t.clock_in]}),e.jsx(v,{fullWidth:!0,variant:"outlined",color:"error",size:"small",startIcon:e.jsx(Me,{}),onClick:()=>(e=>{const n=(new Date).toTimeString().split(" ")[0].substring(0,5),t=i.map(t=>{if(t.id===e){const e=p(t.clock_in,n),s=Math.min(e,8),a=Math.max(0,e-8);return{...t,clock_out:n,hours_worked:e,regular_hours:s,overtime_hours:a}}return t});o(t),localStorage.setItem("attendanceRecords",JSON.stringify(t)),qn.success(`Clock out recorded at ${n}`)})(t.id),sx:{mt:1},children:"Clock Out"})]}),t&&t.clock_out&&e.jsxs(s,{variant:"caption",color:"success.main",children:["Completed: ",t.clock_in," - ",t.clock_out,"(",t.hours_worked,"h)"]})]})},n.id)})})]}),e.jsx(E,{component:b,children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Employee #"}),e.jsx(R,{children:"Employee Name"}),e.jsx(R,{children:"Date"}),e.jsx(R,{children:"Clock In"}),e.jsx(R,{children:"Clock Out"}),e.jsx(R,{children:"Hours Worked"}),e.jsx(R,{children:"Regular Hours"}),e.jsx(R,{children:"Overtime Hours"}),e.jsx(R,{children:"Status"})]})}),e.jsx(D,{children:0===j.length?e.jsx(T,{children:e.jsxs(R,{colSpan:9,align:"center",children:["No attendance records for ",r]})}):j.map(n=>{return e.jsxs(T,{children:[e.jsx(R,{children:n.employee_number}),e.jsx(R,{children:n.employee_name}),e.jsx(R,{children:n.date}),e.jsx(R,{children:n.clock_in}),e.jsx(R,{children:n.clock_out||"-"}),e.jsxs(R,{children:[n.hours_worked,"h"]}),e.jsxs(R,{children:[n.regular_hours,"h"]}),e.jsxs(R,{children:[n.overtime_hours,"h"]}),e.jsx(R,{children:e.jsx(z,{label:n.status.toUpperCase(),color:(t=n.status,{present:"success",absent:"error",late:"warning",half_day:"info"}[t]||"default"),size:"small"})})]},n.id);var t})})]})}),e.jsxs(O,{open:n,onClose:()=>a(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(q,{children:"Mark Attendance"}),e.jsx(B,{children:e.jsx(t,{sx:{pt:2},children:e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Employee",name:"employee_id",value:d.employee_id,onChange:u,required:!0,children:m.map(n=>e.jsxs(c,{value:n.id,children:[n.employee_number," - ",n.full_name]},n.id))})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Date",name:"date",type:"date",value:d.date,onChange:u,InputLabelProps:{shrink:!0},required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Clock In",name:"clock_in",type:"time",value:d.clock_in,onChange:u,InputLabelProps:{shrink:!0},required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Clock Out",name:"clock_out",type:"time",value:d.clock_out,onChange:u,InputLabelProps:{shrink:!0}})}),e.jsx(k,{item:!0,xs:12,children:e.jsxs(y,{fullWidth:!0,select:!0,label:"Status",name:"status",value:d.status,onChange:u,required:!0,children:[e.jsx(c,{value:"present",children:"Present"}),e.jsx(c,{value:"absent",children:"Absent"}),e.jsx(c,{value:"late",children:"Late"}),e.jsx(c,{value:"half_day",children:"Half Day"})]})})]})})}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>a(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>{if(!d.employee_id||!d.date||!d.clock_in)return void qn.error("Please fill in all required fields");const e=m.find(e=>e.id===parseInt(d.employee_id)),n=p(d.clock_in,d.clock_out),t=Math.min(n,8),s=Math.max(0,n-8),r={id:i.length+1,...d,employee_name:(null==e?void 0:e.full_name)||"Unknown",employee_number:(null==e?void 0:e.employee_number)||"N/A",hours_worked:n,regular_hours:t,overtime_hours:s},l=[...i,r];o(l),localStorage.setItem("attendanceRecords",JSON.stringify(l)),qn.success("Attendance recorded successfully!"),a(!1),h({employee_id:"",date:(new Date).toISOString().split("T")[0],clock_in:"",clock_out:"",overtime_hours:0,status:"present"})},sx:pt,children:"Save Attendance"})]})]})]})}function Tt({item:n,index:a,onChange:r,onDelete:i}){return e.jsxs(t,{display:"flex",gap:2,alignItems:"center",mt:1,children:[e.jsx(y,{label:"Allowance Name",value:n.name,onChange:e=>r(a,"name",e.target.value),fullWidth:!0}),e.jsx(y,{label:"Amount",type:"number",value:n.amount,onChange:e=>r(a,"amount",e.target.value),sx:{width:150}}),e.jsxs(t,{textAlign:"center",children:[e.jsx(s,{variant:"caption",children:"Taxable"}),e.jsx(H,{checked:1===n.taxable,onChange:e=>r(a,"taxable",e.target.checked?1:0)})]}),e.jsx(l,{color:"error",onClick:()=>i(a),children:e.jsx($e,{})})]})}function Rt({item:n,index:a,onChange:r,onDelete:i}){return e.jsxs(t,{display:"flex",gap:2,alignItems:"center",mt:1,children:[e.jsx(y,{label:"Benefit Name",value:n.name,onChange:e=>r(a,"name",e.target.value),fullWidth:!0}),e.jsx(y,{label:"Amount",type:"number",value:n.amount,onChange:e=>r(a,"amount",e.target.value),sx:{width:150}}),e.jsxs(y,{select:!0,label:"Type",value:n.benefit_type,onChange:e=>r(a,"benefit_type",e.target.value),sx:{width:150},children:[e.jsx(c,{value:"cash",children:"Cash"}),e.jsx(c,{value:"non-cash",children:"Non-Cash"})]}),e.jsxs(t,{children:[e.jsx(s,{variant:"caption",children:"Taxable"}),e.jsx(H,{checked:1===n.taxable,onChange:e=>r(a,"taxable",e.target.checked?1:0)})]}),e.jsx(l,{color:"error",onClick:()=>i(a),children:e.jsx($e,{})})]})}function Dt({form:n,setForm:r,onSubmit:l,isEdit:i=!1}){const o=(e,t,s)=>{const a=[...n.allowances];a[e][t]=s,r({...n,allowances:a})},c=e=>{const t=[...n.allowances];t.splice(e,1),r({...n,allowances:t})},d=(e,t,s)=>{const a=[...n.benefits];a[e][t]=s,r({...n,benefits:a})},h=e=>{const t=[...n.benefits];t.splice(e,1),r({...n,benefits:t})};return e.jsxs(b,{sx:{p:3},children:[e.jsx(s,{variant:"h6",mb:2,children:i?"Edit Salary Structure":"Create Salary Structure"}),e.jsx(y,{label:"Title",fullWidth:!0,value:n.title,onChange:e=>r({...n,title:e.target.value}),sx:{mb:2}}),e.jsx(y,{label:"Basic Salary",type:"number",fullWidth:!0,value:n.basic_salary,onChange:e=>r({...n,basic_salary:e.target.value}),sx:{mb:3}}),e.jsx(a,{sx:{my:3}}),e.jsx(s,{variant:"subtitle1",children:"Allowances"}),n.allowances.map((n,t)=>e.jsx(Tt,{item:n,index:t,onChange:o,onDelete:c},t)),e.jsx(v,{variant:"outlined",onClick:()=>{r({...n,allowances:[...n.allowances,{name:"",amount:0,taxable:1}]})},sx:{mt:1},children:"+ Add Allowance"}),e.jsx(a,{sx:{my:3}}),e.jsx(s,{variant:"subtitle1",children:"Benefits"}),n.benefits.map((n,t)=>e.jsx(Rt,{item:n,index:t,onChange:d,onDelete:h},t)),e.jsx(v,{variant:"outlined",onClick:()=>{r({...n,benefits:[...n.benefits,{name:"",amount:0,benefit_type:"cash",taxable:0,notes:""}]})},sx:{mt:1},children:"+ Add Benefit"}),e.jsx(t,{textAlign:"right",mt:4,children:e.jsx(v,{variant:"contained",onClick:l,children:i?"Update Structure":"Create Structure"})})]})}const Lt=()=>Bn.get("/salary_structures.php"),zt=e=>Bn.get(`/salary_structures.php?id=${e}`),Nt=e=>Bn.post("/salary_structures.php",e),Ft=(e,n)=>Bn.put(`/salary_structures.php?id=${e}`,n);function Mt(){const n=ne(),[a,r]=Z.useState({title:"",basic_salary:"",allowances:[],benefits:[]});return e.jsxs(t,{p:3,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",children:"Create Salary Structure"}),e.jsx(v,{variant:"outlined",onClick:()=>n("/employer/salary-structures"),children:"View Salary Structures"})]}),e.jsx(Dt,{form:a,setForm:r,onSubmit:async()=>{try{await Nt(a),qn.success("Salary structure created."),n("/employer/salary-structures")}catch(e){qn.error("Failed to create structure.")}},isEdit:!1})]})}function Ot(){const n=me(),[r,i]=Z.useState(0),[o,d]=Z.useState((new Date).getMonth()+1),[h,x]=Z.useState((new Date).getFullYear()),[m,u]=Z.useState({personalRelief:2400,nssfRate:6,nssfEmployerRate:6,nssfUpperLimit:36e3,shifRate:2.75,housingLevyRate:1.5,overtimeRate:150,workingHoursPerMonth:160,workingDaysPerMonth:22,companyName:"Evolve",companyAddress:"Nairobi, Kenya",companyPin:"P000000000A",companyEmail:"payroll@evolve.com",companyPhone:"+254 700 000000"}),{data:p}=he("employees",it.getAllEmployees);null==p||p.records;const{data:j,isLoading:g}=he(["payroll",o,h],()=>ot.getPayroll(o,h),{refetchOnWindowFocus:!1}),f=(null==j?void 0:j.data)||[],_=xe(e=>ot.generateBulkPayroll(e.month,e.year),{onSuccess:e=>{qn.success("Payroll generated successfully!"),n.invalidateQueries(["payroll",o,h])},onError:e=>{qn.error("Failed to generate payroll")}}),C=(e,n)=>{u(t=>({...t,[e]:n}))},S=e=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e-1];return e.jsxs(t,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600},children:"Payroll Management"}),e.jsxs(t,{display:"flex",gap:2,children:[e.jsx(y,{select:!0,size:"small",label:"Month",value:o,onChange:e=>d(Number(e.target.value)),sx:{width:120},children:Array.from({length:12},(e,n)=>n+1).map(n=>e.jsx(c,{value:n,children:S(n)},n))}),e.jsx(y,{select:!0,size:"small",label:"Year",value:h,onChange:e=>x(Number(e.target.value)),sx:{width:100},children:[2024,2025,2026].map(n=>e.jsx(c,{value:n,children:n},n))})]})]}),e.jsxs(F,{value:r,onChange:(e,n)=>i(n),sx:{mb:3},children:[e.jsx(M,{label:"Process Payroll"}),e.jsx(M,{label:"Configuration"}),e.jsx(M,{label:"Salary Structures"})]}),0===r&&e.jsxs(t,{children:[e.jsx(b,{sx:{p:3,mb:3},children:e.jsxs(k,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(k,{item:!0,xs:12,md:6,children:[e.jsxs(s,{variant:"h6",children:["Payroll Period: ",S(o)," ",h]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:[f.length," payroll records"]})]}),e.jsx(k,{item:!0,xs:12,md:6,sx:{textAlign:"right"},children:e.jsx(v,{variant:"contained",startIcon:e.jsx(He,{}),onClick:()=>{window.confirm(`Generate payroll for ${S(o)} ${h}?`)&&_.mutate({month:o,year:h})},disabled:_.isLoading,sx:pt,children:_.isLoading?"Processing...":"Generate Payroll"})})]})}),e.jsx(E,{component:b,children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Employee #"}),e.jsx(R,{children:"Name"}),e.jsx(R,{align:"right",children:"Gross Pay"}),e.jsx(R,{align:"right",children:"NSSF"}),e.jsx(R,{align:"right",children:"SHIF"}),e.jsx(R,{align:"right",children:"Housing Levy"}),e.jsx(R,{align:"right",children:"PAYE"}),e.jsx(R,{align:"right",children:"Total Deductions"}),e.jsx(R,{align:"right",children:"Net Pay"}),e.jsx(R,{align:"center",children:"Status"}),e.jsx(R,{align:"center",children:"Actions"})]})}),e.jsxs(D,{children:[g&&e.jsx(T,{children:e.jsx(R,{colSpan:11,align:"center",children:"Loading payroll..."})}),!g&&0===f.length&&e.jsx(T,{children:e.jsx(R,{colSpan:11,align:"center",children:"No payroll records found for this period"})}),!g&&f.map(t=>{const s="approved"===t.status?"success":"paid"===t.status?"primary":"warning";return e.jsxs(T,{children:[e.jsx(R,{children:t.employee_no?`${t.employee_no}`:`${t.employee_id}`}),e.jsx(R,{children:t.first_name?`${t.first_name} ${t.last_name||""}`.trim():`Employee ${t.employee_id}`})," ",e.jsxs(R,{align:"right",children:["KES ",parseFloat(t.gross_pay).toLocaleString()]}),e.jsxs(R,{align:"right",children:["KES"," ",parseFloat(t.nssf_employee||0).toLocaleString()]}),e.jsxs(R,{align:"right",children:["KES ",parseFloat(t.shif||0).toLocaleString()]}),e.jsxs(R,{align:"right",children:["KES"," ",parseFloat(t.housing_levy||0).toLocaleString()]}),e.jsxs(R,{align:"right",children:["KES ",parseFloat(t.paye||0).toLocaleString()]}),e.jsxs(R,{align:"right",children:["KES"," ",parseFloat(t.total_deductions||0).toLocaleString()]}),e.jsxs(R,{align:"right",sx:{fontWeight:600},children:["KES ",parseFloat(t.net_pay||0).toLocaleString()]}),e.jsx(R,{align:"center",children:e.jsx(z,{label:t.status??"draft",size:"small",color:s})}),e.jsxs(R,{align:"center",children:[e.jsx(l,{size:"small",title:"Download Payslip",onClick:()=>(async(e,n,t)=>{try{const s=await ot.downloadPayslip(e,n,t),a=window.URL.createObjectURL(new Blob([s.data])),r=document.createElement("a");r.href=a,r.setAttribute("download",`payslip_${e}_${n}_${t}.html`),document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(a)}catch(s){qn.error("Failed to download payslip")}})(t.employee_id,o,h),children:e.jsx(Ue,{})}),e.jsx(l,{size:"small",title:"Email Payslip",onClick:()=>(async(e,n,t)=>{try{const s=await ot.sendPayslip(e,n,t);s.success?qn.success("Payslip emailed"):qn.error(s.message||"Failed to email payslip")}catch(s){qn.error("Failed to email payslip")}})(t.employee_id,o,h),children:e.jsx(Je,{})}),"approved"!==t.status&&e.jsx(l,{size:"small",title:"Approve",onClick:()=>(async e=>{try{const t=await ot.approvePayroll(e);t.success?(qn.success("Payroll approved"),n.invalidateQueries(["payroll",o,h])):qn.error(t.message||"Failed to approve payroll")}catch(t){qn.error("Failed to approve payroll")}})(t.id),children:e.jsx(qe,{})}),"approved"===t.status&&e.jsx(l,{size:"small",title:"Mark Paid",onClick:()=>(async e=>{try{const t=await ot.processPayment(e);t.success?(qn.success("Payment processed"),n.invalidateQueries(["payroll",o,h])):qn.error(t.message||"Failed to process payment")}catch(t){qn.error("Failed to process payment")}})(t.id),children:e.jsx(Ie,{})})]})]},t.id)})]})]})})]}),1===r&&e.jsxs(b,{sx:{p:4},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600},children:"Tax & Statutory Deductions"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"Personal Relief (Monthly)",type:"number",value:m.personalRelief,onChange:e=>C("personalRelief",parseFloat(e.target.value)),InputProps:{startAdornment:"KES "}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"NSSF Rate (%)",type:"number",value:m.nssfRate,onChange:e=>C("nssfRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"NSSF Upper Limit",type:"number",value:m.nssfUpperLimit,onChange:e=>C("nssfUpperLimit",parseFloat(e.target.value)),InputProps:{startAdornment:"KES "}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"SHIF Rate (%)",type:"number",value:m.shifRate,onChange:e=>C("shifRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"Housing Levy Rate (%)",type:"number",value:m.housingLevyRate,onChange:e=>C("housingLevyRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"Overtime Rate (%)",type:"number",value:m.overtimeRate,onChange:e=>C("overtimeRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"}})})]}),e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mt:4},children:"Working Hours"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Working Hours Per Month",type:"number",value:m.workingHoursPerMonth,onChange:e=>C("workingHoursPerMonth",parseInt(e.target.value))})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Working Days Per Month",type:"number",value:m.workingDaysPerMonth,onChange:e=>C("workingDaysPerMonth",parseInt(e.target.value))})})]}),e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mt:4},children:"Company Information"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Company Name",value:m.companyName,onChange:e=>C("companyName",e.target.value)})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Company PIN",value:m.companyPin,onChange:e=>C("companyPin",e.target.value)})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Company Address",value:m.companyAddress,onChange:e=>C("companyAddress",e.target.value)})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Company Email",type:"email",value:m.companyEmail,onChange:e=>C("companyEmail",e.target.value)})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Company Phone",value:m.companyPhone,onChange:e=>C("companyPhone",e.target.value)})})]}),e.jsx(t,{sx:{mt:4,display:"flex",justifyContent:"flex-end"},children:e.jsx(v,{variant:"contained",startIcon:e.jsx(Oe,{}),onClick:()=>{localStorage.setItem("payrollConfig",JSON.stringify(m)),qn.success("Configuration saved successfully!")},sx:pt,children:"Save Configuration"})})]}),2===r&&e.jsx(t,{sx:{p:2},children:e.jsx(Mt,{})})]})}function qt(){const[n,r]=Z.useState(0),[i,o]=Z.useState(!1),[d,h]=Z.useState(!1),[x,m]=Z.useState(()=>{const e=localStorage.getItem("performanceReviews");return e?JSON.parse(e):[]}),[u,p]=Z.useState(()=>{const e=localStorage.getItem("employeeGoals");return e?JSON.parse(e):[]}),[j,g]=Z.useState({employee_id:"",review_period:"",review_type:"annual",performance_score:3,technical_skills:3,communication:3,teamwork:3,leadership:3,attendance:3,strengths:"",areas_for_improvement:"",goals_achieved:"",comments:"",status:"completed"}),[f,_]=Z.useState({employee_id:"",title:"",description:"",category:"performance",target_date:"",progress:0,status:"in_progress"}),{data:C}=he("employees",it.getAllEmployees),S=(null==C?void 0:C.records)||[],w=e=>{const{name:n,value:t}=e.target;g(e=>({...e,[n]:t}))},P=e=>{const{name:n,value:t}=e.target;_(e=>({...e,[n]:t}))},I=e=>({completed:"success",in_progress:"info",pending:"warning",cancelled:"error"}[e]||"default");return e.jsxs(t,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600},children:"Performance Management"}),e.jsxs(t,{display:"flex",gap:2,children:[0===n&&e.jsx(v,{variant:"contained",startIcon:e.jsx(ze,{}),onClick:()=>o(!0),sx:pt,children:"New Review"}),1===n&&e.jsx(v,{variant:"contained",startIcon:e.jsx(ze,{}),onClick:()=>h(!0),sx:pt,children:"Set Goal"})]})]}),e.jsxs(F,{value:n,onChange:(e,n)=>r(n),sx:{mb:3},children:[e.jsx(M,{label:"Performance Reviews"}),e.jsx(M,{label:"Goals & KPIs"}),e.jsx(M,{label:"360Â° Feedback"})]}),0===n&&e.jsx(E,{component:b,children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"ID"}),e.jsx(R,{children:"Employee #"}),e.jsx(R,{children:"Employee Name"}),e.jsx(R,{children:"Review Period"}),e.jsx(R,{children:"Review Type"}),e.jsx(R,{children:"Overall Score"}),e.jsx(R,{children:"Review Date"}),e.jsx(R,{children:"Status"}),e.jsx(R,{align:"center",children:"Actions"})]})}),e.jsx(D,{children:0===x.length?e.jsx(T,{children:e.jsx(R,{colSpan:9,align:"center",children:"No performance reviews found"})}):x.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.id}),e.jsx(R,{children:n.employee_number}),e.jsx(R,{children:n.employee_name}),e.jsx(R,{children:n.review_period}),e.jsx(R,{children:n.review_type}),e.jsx(R,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(U,{value:parseFloat(n.overall_score),readOnly:!0,precision:.1,size:"small"}),e.jsx(s,{variant:"body2",fontWeight:600,children:n.overall_score})]})}),e.jsx(R,{children:n.review_date}),e.jsx(R,{children:e.jsx(z,{label:n.status.toUpperCase(),color:I(n.status),size:"small"})}),e.jsxs(R,{align:"center",children:[e.jsx(l,{size:"small",title:"View Details",children:e.jsx(We,{})}),e.jsx(l,{size:"small",title:"Edit",children:e.jsx(Fe,{})})]})]},n.id))})]})}),1===n&&e.jsx(E,{component:b,children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"ID"}),e.jsx(R,{children:"Employee"}),e.jsx(R,{children:"Goal Title"}),e.jsx(R,{children:"Category"}),e.jsx(R,{children:"Target Date"}),e.jsx(R,{children:"Progress"}),e.jsx(R,{children:"Status"}),e.jsx(R,{align:"center",children:"Actions"})]})}),e.jsx(D,{children:0===u.length?e.jsx(T,{children:e.jsx(R,{colSpan:8,align:"center",children:"No goals set"})}):u.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.id}),e.jsxs(R,{children:[e.jsx(s,{variant:"body2",children:n.employee_name}),e.jsx(s,{variant:"caption",color:"text.secondary",children:n.employee_number})]}),e.jsx(R,{children:n.title}),e.jsx(R,{children:n.category}),e.jsx(R,{children:n.target_date}),e.jsx(R,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(L,{variant:"determinate",value:n.progress,sx:{flexGrow:1,height:8,borderRadius:4}}),e.jsxs(s,{variant:"body2",children:[n.progress,"%"]})]})}),e.jsx(R,{children:e.jsx(z,{label:n.status.replace("_"," ").toUpperCase(),color:I(n.status),size:"small"})}),e.jsxs(R,{align:"center",children:[e.jsx(l,{size:"small",title:"View Details",children:e.jsx(We,{})}),e.jsx(l,{size:"small",title:"Edit",children:e.jsx(Fe,{})})]})]},n.id))})]})}),2===n&&e.jsxs(b,{sx:{p:4,textAlign:"center"},children:[e.jsx(we,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",children:"360Â° Feedback System Coming Soon"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"This feature will allow comprehensive feedback collection from peers, subordinates, and supervisors."})]}),e.jsxs(O,{open:i,onClose:()=>o(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(q,{children:"Performance Review"}),e.jsx(B,{children:e.jsx(t,{sx:{pt:2},children:e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Employee",name:"employee_id",value:j.employee_id,onChange:w,required:!0,children:S.map(n=>e.jsxs(c,{value:n.id,children:[n.employee_number," - ",n.full_name]},n.id))})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Review Period",name:"review_period",value:j.review_period,onChange:w,placeholder:"e.g. Q1 2025, Jan-Jun 2025",required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsxs(y,{fullWidth:!0,select:!0,label:"Review Type",name:"review_type",value:j.review_type,onChange:w,required:!0,children:[e.jsx(c,{value:"probation",children:"Probation Review"}),e.jsx(c,{value:"quarterly",children:"Quarterly Review"}),e.jsx(c,{value:"annual",children:"Annual Review"}),e.jsx(c,{value:"project",children:"Project Review"})]})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(a,{sx:{my:2},children:e.jsx(s,{variant:"overline",children:"Performance Ratings"})})}),e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(s,{variant:"body2",gutterBottom:!0,children:"Overall Performance"}),e.jsx(U,{name:"performance_score",value:parseFloat(j.performance_score),onChange:(e,n)=>w({target:{name:"performance_score",value:n}}),precision:.5,size:"large"})]}),e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(s,{variant:"body2",gutterBottom:!0,children:"Technical Skills"}),e.jsx(U,{name:"technical_skills",value:parseFloat(j.technical_skills),onChange:(e,n)=>w({target:{name:"technical_skills",value:n}}),precision:.5,size:"large"})]}),e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(s,{variant:"body2",gutterBottom:!0,children:"Communication"}),e.jsx(U,{name:"communication",value:parseFloat(j.communication),onChange:(e,n)=>w({target:{name:"communication",value:n}}),precision:.5,size:"large"})]}),e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(s,{variant:"body2",gutterBottom:!0,children:"Teamwork"}),e.jsx(U,{name:"teamwork",value:parseFloat(j.teamwork),onChange:(e,n)=>w({target:{name:"teamwork",value:n}}),precision:.5,size:"large"})]}),e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(s,{variant:"body2",gutterBottom:!0,children:"Leadership"}),e.jsx(U,{name:"leadership",value:parseFloat(j.leadership),onChange:(e,n)=>w({target:{name:"leadership",value:n}}),precision:.5,size:"large"})]}),e.jsxs(k,{item:!0,xs:12,sm:6,children:[e.jsx(s,{variant:"body2",gutterBottom:!0,children:"Attendance & Punctuality"}),e.jsx(U,{name:"attendance",value:parseFloat(j.attendance),onChange:(e,n)=>w({target:{name:"attendance",value:n}}),precision:.5,size:"large"})]}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Key Strengths",name:"strengths",value:j.strengths,onChange:w,multiline:!0,rows:2})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Areas for Improvement",name:"areas_for_improvement",value:j.areas_for_improvement,onChange:w,multiline:!0,rows:2})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Goals Achieved",name:"goals_achieved",value:j.goals_achieved,onChange:w,multiline:!0,rows:2})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Additional Comments",name:"comments",value:j.comments,onChange:w,multiline:!0,rows:3})})]})})}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>o(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>{if(!j.employee_id||!j.review_period)return void qn.error("Please fill in all required fields");const e=S.find(e=>e.id===parseInt(j.employee_id)),n=(parseFloat(j.performance_score)+parseFloat(j.technical_skills)+parseFloat(j.communication)+parseFloat(j.teamwork)+parseFloat(j.leadership)+parseFloat(j.attendance))/6,t={id:x.length+1,...j,employee_name:(null==e?void 0:e.full_name)||"Unknown",employee_number:(null==e?void 0:e.employee_number)||"N/A",overall_score:n.toFixed(1),review_date:(new Date).toISOString().split("T")[0]},s=[...x,t];m(s),localStorage.setItem("performanceReviews",JSON.stringify(s)),qn.success("Performance review submitted successfully!"),o(!1),g({employee_id:"",review_period:"",review_type:"annual",performance_score:3,technical_skills:3,communication:3,teamwork:3,leadership:3,attendance:3,strengths:"",areas_for_improvement:"",goals_achieved:"",comments:"",status:"completed"})},sx:pt,children:"Submit Review"})]})]}),e.jsxs(O,{open:d,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(q,{children:"Set Employee Goal"}),e.jsx(B,{children:e.jsx(t,{sx:{pt:2},children:e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Employee",name:"employee_id",value:f.employee_id,onChange:P,required:!0,children:S.map(n=>e.jsxs(c,{value:n.id,children:[n.employee_number," - ",n.full_name]},n.id))})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Goal Title",name:"title",value:f.title,onChange:P,required:!0})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Description",name:"description",value:f.description,onChange:P,multiline:!0,rows:3})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsxs(y,{fullWidth:!0,select:!0,label:"Category",name:"category",value:f.category,onChange:P,required:!0,children:[e.jsx(c,{value:"performance",children:"Performance"}),e.jsx(c,{value:"skill_development",children:"Skill Development"}),e.jsx(c,{value:"project",children:"Project"}),e.jsx(c,{value:"personal",children:"Personal"})]})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Target Date",name:"target_date",type:"date",value:f.target_date,onChange:P,InputLabelProps:{shrink:!0},required:!0})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Initial Progress (%)",name:"progress",type:"number",value:f.progress,onChange:P,inputProps:{min:0,max:100}})})]})})}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>h(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>{if(!f.employee_id||!f.title||!f.target_date)return void qn.error("Please fill in all required fields");const e=S.find(e=>e.id===parseInt(f.employee_id)),n={id:u.length+1,...f,employee_name:(null==e?void 0:e.full_name)||"Unknown",employee_number:(null==e?void 0:e.employee_number)||"N/A",created_date:(new Date).toISOString().split("T")[0]},t=[...u,n];p(t),localStorage.setItem("employeeGoals",JSON.stringify(t)),qn.success("Goal created successfully!"),h(!1),_({employee_id:"",title:"",description:"",category:"performance",target_date:"",progress:0,status:"in_progress"})},sx:pt,children:"Create Goal"})]})]})]})}const Bt={"& .MuiOutlinedInput-root":{borderRadius:"8px",fontSize:"14px"},"& .MuiOutlinedInput-input":{padding:"8px 12px"}};function $t(){const[n,a]=Z.useState(0),[r,i]=Z.useState(!1),[o,d]=Z.useState([{id:1,title:"Leadership Development",category:"Management",duration:"3 months",participants:12,status:"ongoing"},{id:2,title:"Technical Skills Workshop",category:"Technical",duration:"1 month",participants:25,status:"completed"},{id:3,title:"Customer Service Excellence",category:"Soft Skills",duration:"2 weeks",participants:30,status:"upcoming"}]),[h,x]=Z.useState([{id:1,employee:"John Doe",course:"Project Management",issueDate:"2025-01-15",expiryDate:"2027-01-15"},{id:2,employee:"Jane Smith",course:"Safety Training",issueDate:"2025-02-20",expiryDate:"2026-02-20"},{id:3,employee:"Bob Johnson",course:"Advanced Excel",issueDate:"2025-03-10",expiryDate:"2027-03-10"}]),m={totalContribution:5e5,utilized:32e4,remaining:18e4,utilizationRate:64};return e.jsxs(t,{children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600,mb:3},children:"Learning & Development"}),e.jsxs(F,{value:n,onChange:(e,n)=>a(n),sx:{mb:3},children:[e.jsx(M,{label:"Training Programs"}),e.jsx(M,{label:"NITA Levy"}),e.jsx(M,{label:"Certificates"})]}),0===n&&e.jsx(t,{children:e.jsxs(b,{sx:{p:3,borderRadius:"12px",mb:3},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Training Programs"}),e.jsx(v,{variant:"contained",size:"small",startIcon:e.jsx(ze,{}),onClick:()=>i(!0),sx:{bgcolor:"#1976d2",borderRadius:"6px",padding:"6px 16px",fontSize:"13px",textTransform:"none"},children:"Add Program"})]}),e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Program Title"}),e.jsx(R,{children:"Category"}),e.jsx(R,{children:"Duration"}),e.jsx(R,{children:"Participants"}),e.jsx(R,{children:"Status"}),e.jsx(R,{align:"right",children:"Actions"})]})}),e.jsx(D,{children:o.map(n=>{return e.jsxs(T,{children:[e.jsx(R,{children:n.title}),e.jsx(R,{children:n.category}),e.jsx(R,{children:n.duration}),e.jsx(R,{children:n.participants}),e.jsx(R,{children:e.jsx(z,{label:n.status.toUpperCase(),color:(t=n.status,{ongoing:"info",completed:"success",upcoming:"warning"}[t]||"default"),size:"small"})}),e.jsxs(R,{align:"right",children:[e.jsx(l,{size:"small",color:"primary",children:e.jsx(Fe,{fontSize:"small"})}),e.jsx(l,{size:"small",color:"primary",children:e.jsx(Ue,{fontSize:"small"})})]})]},n.id);var t})})]})})]})}),1===n&&e.jsx(t,{children:e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,md:8,children:e.jsxs(b,{sx:{p:4,borderRadius:"12px"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"NITA Levy Utilization"}),e.jsxs(k,{container:!0,spacing:3,sx:{mt:2},children:[e.jsx(k,{item:!0,xs:12,sm:4,children:e.jsxs(t,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Total Contribution"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700,color:"#1976d2",mt:1},children:["KES ",m.totalContribution.toLocaleString()]})]})}),e.jsx(k,{item:!0,xs:12,sm:4,children:e.jsxs(t,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Utilized"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700,color:"#2e7d32",mt:1},children:["KES ",m.utilized.toLocaleString()]})]})}),e.jsx(k,{item:!0,xs:12,sm:4,children:e.jsxs(t,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Remaining"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700,color:"#ed6c02",mt:1},children:["KES ",m.remaining.toLocaleString()]})]})}),e.jsxs(k,{item:!0,xs:12,children:[e.jsxs(s,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Utilization Rate: ",m.utilizationRate,"%"]}),e.jsx(L,{variant:"determinate",value:m.utilizationRate,sx:{height:10,borderRadius:5}})]})]})]})}),e.jsx(k,{item:!0,xs:12,md:4,children:e.jsxs(b,{sx:{p:4,borderRadius:"12px",textAlign:"center",bgcolor:"#f5f5f5"},children:[e.jsx(De,{sx:{fontSize:60,color:"#1976d2",mb:2}}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Maximize Your NITA Levy"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Plan training programs to utilize your NITA levy effectively and develop your workforce."}),e.jsx(v,{variant:"outlined",sx:{mt:3,borderRadius:"6px",fontSize:"13px",textTransform:"none",borderColor:"#1976d2",color:"#1976d2"},children:"View Guidelines"})]})})]})}),2===n&&e.jsxs(b,{sx:{p:3,borderRadius:"12px"},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Employee Certificates"}),e.jsx(v,{variant:"contained",size:"small",startIcon:e.jsx(ze,{}),sx:{bgcolor:"#1976d2",borderRadius:"6px",padding:"6px 16px",fontSize:"13px",textTransform:"none"},children:"Add Certificate"})]}),e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Employee"}),e.jsx(R,{children:"Course/Certification"}),e.jsx(R,{children:"Issue Date"}),e.jsx(R,{children:"Expiry Date"}),e.jsx(R,{align:"right",children:"Actions"})]})}),e.jsx(D,{children:h.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.employee}),e.jsx(R,{children:n.course}),e.jsx(R,{children:n.issueDate}),e.jsx(R,{children:n.expiryDate}),e.jsx(R,{align:"right",children:e.jsx(l,{size:"small",color:"primary",children:e.jsx(Ue,{fontSize:"small"})})})]},n.id))})]})})]}),e.jsxs(O,{open:r,onClose:()=>i(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(q,{children:"Add Training Program"}),e.jsx(B,{children:e.jsx(t,{sx:{pt:2},children:e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Program Title",sx:Bt})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsxs(y,{fullWidth:!0,select:!0,label:"Category",sx:Bt,children:[e.jsx(c,{value:"management",children:"Management"}),e.jsx(c,{value:"technical",children:"Technical"}),e.jsx(c,{value:"soft-skills",children:"Soft Skills"}),e.jsx(c,{value:"compliance",children:"Compliance"})]})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Duration",sx:Bt,placeholder:"e.g. 3 months"})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Description",multiline:!0,rows:3,sx:Bt})})]})})}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>{qn.success("Training program added successfully!"),i(!1)},sx:{bgcolor:"#1976d2",borderRadius:"6px",fontSize:"13px",textTransform:"none"},children:"Add Program"})]})]})]})}const Ht={"& .MuiOutlinedInput-root":{borderRadius:"8px",fontSize:"14px"},"& .MuiOutlinedInput-input":{padding:"8px 12px"}},Ut={borderRadius:"6px",padding:"6px 16px",fontSize:"13px",textTransform:"none",fontWeight:500};function Jt(){const[n,a]=Z.useState(0),[r,l]=Z.useState("monthly"),[i,o]=Z.useState((new Date).getMonth()+1),[d,h]=Z.useState((new Date).getFullYear()),{data:x}=he("employees",it.getAllEmployees),m=(null==x?void 0:x.records)||[],u=(e,n)=>{alert(`Generating ${e} report in ${n} format...`)},p={totalEmployees:m.length,activeEmployees:m.filter(e=>"active"===e.employment_status).length,byDepartment:m.reduce((e,n)=>{const t=n.department_name||"Unassigned";return e[t]=(e[t]||0)+1,e},{}),byType:m.reduce((e,n)=>{const t=n.employment_type||"Unknown";return e[t]=(e[t]||0)+1,e},{})};return e.jsxs(t,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600},children:"Reports & Analytics"}),e.jsxs(t,{display:"flex",gap:1,children:[e.jsxs(y,{select:!0,size:"small",value:r,onChange:e=>l(e.target.value),sx:{...Ht,width:120},children:[e.jsx(c,{value:"daily",children:"Daily"}),e.jsx(c,{value:"weekly",children:"Weekly"}),e.jsx(c,{value:"monthly",children:"Monthly"}),e.jsx(c,{value:"yearly",children:"Yearly"})]}),e.jsx(y,{select:!0,size:"small",value:i,onChange:e=>o(e.target.value),sx:{...Ht,width:100},children:Array.from({length:12},(e,n)=>n+1).map(n=>e.jsx(c,{value:n,children:new Date(2e3,n-1).toLocaleString("default",{month:"short"})},n))}),e.jsx(y,{select:!0,size:"small",value:d,onChange:e=>h(e.target.value),sx:{...Ht,width:90},children:[2024,2025,2026].map(n=>e.jsx(c,{value:n,children:n},n))})]})]}),e.jsxs(F,{value:n,onChange:(e,n)=>a(n),sx:{mb:3},children:[e.jsx(M,{label:"Headcount"}),e.jsx(M,{label:"Turnover"}),e.jsx(M,{label:"Payroll Summary"}),e.jsx(M,{label:"Compliance"})]}),0===n&&e.jsxs(t,{children:[e.jsxs(k,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(k,{item:!0,xs:12,sm:6,md:3,children:e.jsx(P,{sx:{borderRadius:"12px"},children:e.jsxs(I,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Total Employees"}),e.jsx(s,{variant:"h3",sx:{fontWeight:700,color:"#1976d2",mt:1},children:p.totalEmployees})]})})}),e.jsx(k,{item:!0,xs:12,sm:6,md:3,children:e.jsx(P,{sx:{borderRadius:"12px"},children:e.jsxs(I,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Active Employees"}),e.jsx(s,{variant:"h3",sx:{fontWeight:700,color:"#2e7d32",mt:1},children:p.activeEmployees})]})})}),e.jsx(k,{item:!0,xs:12,sm:6,md:3,children:e.jsx(P,{sx:{borderRadius:"12px"},children:e.jsxs(I,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"New Hires (MTD)"}),e.jsx(s,{variant:"h3",sx:{fontWeight:700,color:"#ed6c02",mt:1},children:"0"})]})})}),e.jsx(k,{item:!0,xs:12,sm:6,md:3,children:e.jsx(P,{sx:{borderRadius:"12px"},children:e.jsxs(I,{children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"Terminations (MTD)"}),e.jsx(s,{variant:"h3",sx:{fontWeight:700,color:"#d32f2f",mt:1},children:"0"})]})})})]}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(b,{sx:{p:3,borderRadius:"12px"},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"By Department"}),e.jsx(v,{size:"small",startIcon:e.jsx(Ue,{}),onClick:()=>u("headcount-department","pdf"),sx:{...Ut,color:"#1976d2"},children:"Export"})]}),e.jsx(E,{children:e.jsxs(W,{size:"small",children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Department"}),e.jsx(R,{align:"right",children:"Count"}),e.jsx(R,{align:"right",children:"%"})]})}),e.jsx(D,{children:Object.entries(p.byDepartment).map(([n,t])=>e.jsxs(T,{children:[e.jsx(R,{children:n}),e.jsx(R,{align:"right",children:t}),e.jsxs(R,{align:"right",children:[(t/p.totalEmployees*100).toFixed(1),"%"]})]},n))})]})})]})}),e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(b,{sx:{p:3,borderRadius:"12px"},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"By Employment Type"}),e.jsx(v,{size:"small",startIcon:e.jsx(Ue,{}),onClick:()=>u("headcount-type","pdf"),sx:{...Ut,color:"#1976d2"},children:"Export"})]}),e.jsx(E,{children:e.jsxs(W,{size:"small",children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Type"}),e.jsx(R,{align:"right",children:"Count"}),e.jsx(R,{align:"right",children:"%"})]})}),e.jsx(D,{children:Object.entries(p.byType).map(([n,t])=>e.jsxs(T,{children:[e.jsx(R,{sx:{textTransform:"capitalize"},children:n}),e.jsx(R,{align:"right",children:t}),e.jsxs(R,{align:"right",children:[(t/p.totalEmployees*100).toFixed(1),"%"]})]},n))})]})})]})})]})]}),1===n&&e.jsxs(b,{sx:{p:4,textAlign:"center",borderRadius:"12px"},children:[e.jsx(we,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",children:"Turnover Reports"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Track employee turnover rates, retention analysis, and exit trends."}),e.jsxs(t,{mt:3,display:"flex",gap:2,justifyContent:"center",children:[e.jsx(v,{variant:"outlined",startIcon:e.jsx(Ke,{}),onClick:()=>u("turnover","pdf"),sx:{...Ut,borderColor:"#1976d2",color:"#1976d2"},children:"Download PDF"}),e.jsx(v,{variant:"outlined",startIcon:e.jsx(Ge,{}),onClick:()=>u("turnover","excel"),sx:{...Ut,borderColor:"#2e7d32",color:"#2e7d32"},children:"Download Excel"})]})]}),2===n&&e.jsxs(b,{sx:{p:4,textAlign:"center",borderRadius:"12px"},children:[e.jsx(we,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",children:"Payroll Summary Reports"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Monthly payroll summaries, tax reports, and statutory deductions."}),e.jsxs(t,{mt:3,display:"flex",gap:2,justifyContent:"center",children:[e.jsx(v,{variant:"outlined",startIcon:e.jsx(Ke,{}),onClick:()=>u("payroll","pdf"),sx:{...Ut,borderColor:"#1976d2",color:"#1976d2"},children:"Download PDF"}),e.jsx(v,{variant:"outlined",startIcon:e.jsx(Ge,{}),onClick:()=>u("payroll","excel"),sx:{...Ut,borderColor:"#2e7d32",color:"#2e7d32"},children:"Download Excel"})]})]}),3===n&&e.jsxs(b,{sx:{p:4,textAlign:"center",borderRadius:"12px"},children:[e.jsx(we,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",children:"Compliance Reports"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"NSSF, SHIF, Housing Levy, PAYE compliance reports for submission."}),e.jsxs(t,{mt:3,display:"flex",gap:2,justifyContent:"center",children:[e.jsx(v,{variant:"outlined",startIcon:e.jsx(Ke,{}),onClick:()=>u("compliance","pdf"),sx:{...Ut,borderColor:"#1976d2",color:"#1976d2"},children:"Download PDF"}),e.jsx(v,{variant:"outlined",startIcon:e.jsx(Ge,{}),onClick:()=>u("compliance","excel"),sx:{...Ut,borderColor:"#2e7d32",color:"#2e7d32"},children:"Download Excel"})]})]})]})}const Kt={"& .MuiOutlinedInput-root":{borderRadius:"8px",fontSize:"14px"},"& .MuiOutlinedInput-input":{padding:"8px 12px"}};function Gt(){const[n,a]=Z.useState(0),[r,i]=Z.useState(!1),[o,c]=Z.useState(""),[d,h]=Z.useState({name:"Evolve",address:"Nairobi, Kenya",phone:"+254 700 000000",email:"info@evolve.com",pin:"P000000000A",nssfNumber:"NSSF1234567",shifNumber:"SHIF7654321"}),[x,m]=Z.useState([{id:1,name:"Human Resources",code:"HR",manager:"John Doe"},{id:2,name:"Finance",code:"FIN",manager:"Jane Smith"},{id:3,name:"IT",code:"IT",manager:"Bob Johnson"}]),[u,p]=Z.useState([{id:1,title:"HR Manager",department:"Human Resources",level:"Management"},{id:2,title:"Accountant",department:"Finance",level:"Professional"},{id:3,title:"Software Developer",department:"IT",level:"Professional"}]),[j,g]=Z.useState([{id:1,name:"Annual Leave",days:21,carryOver:!0},{id:2,name:"Sick Leave",days:14,carryOver:!1},{id:3,name:"Maternity Leave",days:90,carryOver:!1},{id:4,name:"Paternity Leave",days:14,carryOver:!1}]),[f,_]=Z.useState(()=>{const e=localStorage.getItem("payrollConfig");return e?JSON.parse(e):{personalRelief:2400,nssfRate:6,nssfEmployerRate:6,nssfUpperLimit:36e3,shifRate:2.75,housingLevyRate:1.5,overtimeRate:150,workingHoursPerMonth:160,workingDaysPerMonth:22}}),C=e=>{c(e),i(!0)},S=(e,n)=>{_(t=>({...t,[e]:n}))};return e.jsxs(t,{children:[e.jsx(s,{variant:"h4",sx:{fontWeight:600,mb:3},children:"System Settings"}),e.jsxs(F,{value:n,onChange:(e,n)=>a(n),sx:{mb:3},children:[e.jsx(M,{label:"Company Details"}),e.jsx(M,{label:"Departments"}),e.jsx(M,{label:"Positions"}),e.jsx(M,{label:"Leave Types"}),e.jsx(M,{label:"Payroll Configuration"})]}),0===n&&e.jsxs(b,{sx:{p:4,borderRadius:"12px"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Company Information"}),e.jsxs(k,{container:!0,spacing:3,sx:{mt:2},children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Company Name",value:d.name,onChange:e=>h({...d,name:e.target.value}),sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"PIN Number",value:d.pin,onChange:e=>h({...d,pin:e.target.value}),sx:Kt})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Address",value:d.address,onChange:e=>h({...d,address:e.target.value}),sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Phone",value:d.phone,onChange:e=>h({...d,phone:e.target.value}),sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Email",value:d.email,onChange:e=>h({...d,email:e.target.value}),sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"NSSF Number",value:d.nssfNumber,onChange:e=>h({...d,nssfNumber:e.target.value}),sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"SHIF Number",value:d.shifNumber,onChange:e=>h({...d,shifNumber:e.target.value}),sx:Kt})})]}),e.jsx(t,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:e.jsx(v,{variant:"contained",startIcon:e.jsx(Oe,{}),onClick:()=>{localStorage.setItem("companyInfo",JSON.stringify(d)),qn.success("Company information saved!")},sx:{bgcolor:"#1976d2",borderRadius:"6px",padding:"6px 20px",fontSize:"13px",textTransform:"none",fontWeight:500},children:"Save Changes"})})]}),1===n&&e.jsxs(b,{sx:{p:3,borderRadius:"12px"},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Departments"}),e.jsx(v,{variant:"contained",size:"small",startIcon:e.jsx(ze,{}),onClick:()=>C("Department"),sx:{bgcolor:"#1976d2",borderRadius:"6px",padding:"6px 16px",fontSize:"13px",textTransform:"none"},children:"Add Department"})]}),e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Name"}),e.jsx(R,{children:"Code"}),e.jsx(R,{children:"Manager"}),e.jsx(R,{align:"right",children:"Actions"})]})}),e.jsx(D,{children:x.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.name}),e.jsx(R,{children:n.code}),e.jsx(R,{children:n.manager}),e.jsxs(R,{align:"right",children:[e.jsx(l,{size:"small",color:"primary",children:e.jsx(Fe,{fontSize:"small"})}),e.jsx(l,{size:"small",color:"error",children:e.jsx($e,{fontSize:"small"})})]})]},n.id))})]})})]}),2===n&&e.jsxs(b,{sx:{p:3,borderRadius:"12px"},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Positions"}),e.jsx(v,{variant:"contained",size:"small",startIcon:e.jsx(ze,{}),onClick:()=>C("Position"),sx:{bgcolor:"#1976d2",borderRadius:"6px",padding:"6px 16px",fontSize:"13px",textTransform:"none"},children:"Add Position"})]}),e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Title"}),e.jsx(R,{children:"Department"}),e.jsx(R,{children:"Level"}),e.jsx(R,{align:"right",children:"Actions"})]})}),e.jsx(D,{children:u.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.title}),e.jsx(R,{children:n.department}),e.jsx(R,{children:n.level}),e.jsxs(R,{align:"right",children:[e.jsx(l,{size:"small",color:"primary",children:e.jsx(Fe,{fontSize:"small"})}),e.jsx(l,{size:"small",color:"error",children:e.jsx($e,{fontSize:"small"})})]})]},n.id))})]})})]}),3===n&&e.jsxs(b,{sx:{p:3,borderRadius:"12px"},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Leave Types"}),e.jsx(v,{variant:"contained",size:"small",startIcon:e.jsx(ze,{}),onClick:()=>C("Leave Type"),sx:{bgcolor:"#1976d2",borderRadius:"6px",padding:"6px 16px",fontSize:"13px",textTransform:"none"},children:"Add Leave Type"})]}),e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Name"}),e.jsx(R,{children:"Days Allowed"}),e.jsx(R,{children:"Carry Over"}),e.jsx(R,{align:"right",children:"Actions"})]})}),e.jsx(D,{children:j.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.name}),e.jsx(R,{children:n.days}),e.jsx(R,{children:n.carryOver?"Yes":"No"}),e.jsxs(R,{align:"right",children:[e.jsx(l,{size:"small",color:"primary",children:e.jsx(Fe,{fontSize:"small"})}),e.jsx(l,{size:"small",color:"error",children:e.jsx($e,{fontSize:"small"})})]})]},n.id))})]})})]}),4===n&&e.jsxs(b,{sx:{p:4,borderRadius:"12px"},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600},children:"Tax & Statutory Deductions"}),e.jsx(t,{sx:{borderBottom:"2px solid",borderColor:"divider",mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"Personal Relief (Monthly)",type:"number",value:f.personalRelief,onChange:e=>S("personalRelief",parseFloat(e.target.value)),InputProps:{startAdornment:"KES "},sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"NSSF Rate (%)",type:"number",value:f.nssfRate,onChange:e=>S("nssfRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"},sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"NSSF Upper Limit",type:"number",value:f.nssfUpperLimit,onChange:e=>S("nssfUpperLimit",parseFloat(e.target.value)),InputProps:{startAdornment:"KES "},sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"SHIF Rate (%)",type:"number",value:f.shifRate,onChange:e=>S("shifRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"},sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"Housing Levy Rate (%)",type:"number",value:f.housingLevyRate,onChange:e=>S("housingLevyRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"},sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"Overtime Rate (%)",type:"number",value:f.overtimeRate,onChange:e=>S("overtimeRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"},sx:Kt})})]}),e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mt:4},children:"Working Hours"}),e.jsx(t,{sx:{borderBottom:"2px solid",borderColor:"divider",mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Working Hours Per Month",type:"number",value:f.workingHoursPerMonth,onChange:e=>S("workingHoursPerMonth",parseInt(e.target.value)),sx:Kt})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Working Days Per Month",type:"number",value:f.workingDaysPerMonth,onChange:e=>S("workingDaysPerMonth",parseInt(e.target.value)),sx:Kt})})]}),e.jsx(t,{sx:{mt:4,display:"flex",justifyContent:"flex-end"},children:e.jsx(v,{variant:"contained",startIcon:e.jsx(Oe,{}),onClick:()=>{localStorage.setItem("payrollConfig",JSON.stringify(f)),qn.success("Payroll configuration saved successfully!")},sx:pt,children:"Save Configuration"})})]}),e.jsxs(O,{open:r,onClose:()=>i(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsxs(q,{children:["Add ",o]}),e.jsx(B,{children:e.jsxs(t,{sx:{pt:2},children:[e.jsx(y,{fullWidth:!0,label:"Name",sx:{...Kt,mb:2}}),e.jsx(y,{fullWidth:!0,label:"Description",multiline:!0,rows:3,sx:Kt})]})}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>{qn.success(`${o} added successfully!`),i(!1)},sx:{bgcolor:"#1976d2",borderRadius:"6px",fontSize:"13px",textTransform:"none"},children:"Add"})]})]})]})}function Yt(){const[n,a]=Z.useState([]),[r,i]=Z.useState(null),[o,c]=Z.useState("");Z.useEffect(()=>{d()},[]);const d=async()=>{const e=await ft();e.success&&a(e.data)};return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(s,{variant:"h5",sx:{fontWeight:600},children:"My Documents"}),e.jsx(P,{elevation:3,children:e.jsxs(I,{children:[e.jsx(s,{variant:"subtitle1",sx:{fontWeight:500,mb:2},children:"Upload New Document"}),e.jsxs(t,{component:"form",onSubmit:async e=>{if(e.preventDefault(),!r)return alert("Please select a file.");const n=await yt(r,o);n.success?(i(null),c(""),d()):alert(n.message)},sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(y,{label:"Document Title",value:o,onChange:e=>c(e.target.value),required:!0,fullWidth:!0,sx:{maxWidth:300}}),e.jsxs(v,{variant:"outlined",component:"label",startIcon:e.jsx(Ye,{}),sx:{height:56},children:["Choose File",e.jsx("input",{type:"file",hidden:!0,onChange:e=>i(e.target.files[0])})]}),e.jsx(v,{type:"submit",variant:"contained",sx:{height:56},disabled:!r,children:"Upload"})]}),r&&e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Selected: ",r.name]})]})}),e.jsx(b,{elevation:3,children:e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{sx:{fontWeight:600},children:"Title"}),e.jsx(R,{sx:{fontWeight:600},children:"Uploaded At"}),e.jsx(R,{sx:{fontWeight:600},align:"center",children:"Action"})]})}),e.jsx(D,{children:n.length>0?n.map(n=>e.jsxs(T,{hover:!0,children:[e.jsx(R,{children:n.title}),e.jsx(R,{children:n.uploaded_at}),e.jsx(R,{align:"center",children:e.jsx(l,{color:"primary",href:`${"https://evolvepayroll.co.ke/api".replace("/api","")}/${n.file_path}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(We,{})})})]},n.id)):e.jsx(T,{children:e.jsx(R,{colSpan:3,align:"center",children:e.jsx(s,{variant:"body2",color:"text.secondary",sx:{py:2},children:"No documents uploaded yet."})})})})]})})})]})}function Vt(e){return`KES ${Number(e??0).toLocaleString("en-KE",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function Qt(){var n,r,l,i,o,c,d,h,x,m,u,p,j,g,y;const{data:f,isLoading:v,isError:_,error:C}=he(["my-salary-structure"],()=>Bn.get("/employee/my_salary_structure.php").then(e=>e.data),{refetchOnWindowFocus:!1}),S=(null==(n=null==f?void 0:f.data)?void 0:n.structure)??null,P=(null==(r=null==f?void 0:f.data)?void 0:r.assigned_at)??null,{data:I,isLoading:E,isError:L,error:z}=he(["calculate-payroll",null==S?void 0:S.title,null==S?void 0:S.basic_salary,null==S?void 0:S.id],async()=>{const e={basic:Number(S.basic_salary)||0,allowances:Array.isArray(S.allowances)?S.allowances:[],benefits:Array.isArray(S.benefits)?S.benefits:[]};return(await Bn.post("/calculate_payroll.php",e)).data},{enabled:!!S,refetchOnWindowFocus:!1,staleTime:3e5});if(v)return e.jsx(t,{textAlign:"center",mt:6,children:e.jsx(w,{})});if(_||!S)return e.jsxs(t,{p:3,children:[e.jsx(s,{variant:"h6",color:"error",children:"Failed to load salary structure."}),(null==C?void 0:C.message)&&e.jsx(s,{variant:"body2",color:"text.secondary",mt:1,children:String(C.message)})]});(null==I?void 0:I.data)??(null==(l=null==I?void 0:I.data)?void 0:l.data)??(null==(i=null==I?void 0:I.data)?void 0:i.result)??(null==I||I.data);const N=(null==(o=null==I?void 0:I.data)?void 0:o.data)??(null==I?void 0:I.data)??null;return e.jsx(t,{p:3,children:e.jsxs(b,{sx:{p:4},children:[e.jsx(s,{variant:"h5",gutterBottom:!0,children:"My Salary Structure"}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:12,md:6,children:e.jsx(W,{size:"small",children:e.jsxs(D,{children:[e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Title"})}),e.jsx(R,{children:S.title??"â€”"})]}),e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Basic Salary"})}),e.jsx(R,{children:Vt(S.basic_salary)})]}),e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Gross (structure)"})}),e.jsx(R,{children:Vt(S.gross_salary)})]}),e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Net (before statutory)"})}),e.jsx(R,{children:Vt(S.net_salary)})]}),e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Currency"})}),e.jsx(R,{children:S.currency??"KES"})]}),e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Effective"})}),e.jsxs(R,{children:[S.effective_from??"â€”"," ",S.effective_to?` â€” ${S.effective_to}`:""]})]}),e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Assigned at"})}),e.jsx(R,{children:P??"â€”"})]})]})})}),e.jsxs(k,{item:!0,xs:12,md:6,children:[e.jsx(s,{variant:"subtitle1",sx:{mb:1},children:"Allowances & Benefits Summary"}),e.jsxs(W,{size:"small",children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Name"}),e.jsx(R,{children:"Taxable"}),e.jsx(R,{align:"right",children:"Amount"})]})}),e.jsxs(D,{children:[(S.allowances??[]).map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.name}),e.jsx(R,{children:Number(n.taxable)?"Yes":"No"}),e.jsx(R,{align:"right",children:Vt(n.amount)})]},`al-${n.id}`)),(S.benefits??[]).map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.name}),e.jsx(R,{children:Number(n.taxable)?"Yes":"No"}),e.jsx(R,{align:"right",children:Vt(n.amount)})]},`b-${n.id}`)),0===(S.allowances??[]).length&&0===(S.benefits??[]).length&&e.jsx(T,{children:e.jsx(R,{colSpan:3,align:"center",children:"No allowances or benefits found"})})]})]})]})]}),e.jsx(a,{sx:{my:3}}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Statutory Breakdown (calculated)"}),E&&e.jsxs(t,{textAlign:"center",my:2,children:[e.jsx(w,{size:28}),e.jsx(s,{variant:"body2",color:"text.secondary",mt:1,children:"Calculating taxes..."})]}),L&&e.jsxs(s,{color:"error",variant:"body2",children:["Failed to calculate statutory deductions. ",(null==z?void 0:z.message)?`(${z.message})`:""]}),!E&&N&&N.success&&e.jsxs(t,{children:[e.jsx(W,{sx:{mt:1},children:e.jsxs(D,{children:[e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Gross (calculated)"})}),e.jsx(R,{children:Vt((null==(c=N.data)?void 0:c.gross_pay)??N.gross_pay)})]}),e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Taxable Income"})}),e.jsx(R,{children:Vt((null==(d=N.data)?void 0:d.taxable_income)??N.taxable_income)})]})]})}),e.jsxs(W,{size:"small",sx:{mt:2},children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Deduction"}),e.jsx(R,{align:"right",children:"Amount"})]})}),e.jsxs(D,{children:[e.jsxs(T,{children:[e.jsx(R,{children:"PAYE"}),e.jsx(R,{align:"right",children:Vt((null==(h=N.data)?void 0:h.paye)??N.paye)})]}),e.jsxs(T,{children:[e.jsx(R,{children:"NSSF (employee)"}),e.jsx(R,{align:"right",children:Vt((null==(x=N.data)?void 0:x.nssf_employee)??N.nssf_employee)})]}),e.jsxs(T,{children:[e.jsx(R,{children:"NSSF (employer)"}),e.jsx(R,{align:"right",children:Vt((null==(m=N.data)?void 0:m.nssf_employer)??N.nssf_employer)})]}),e.jsxs(T,{children:[e.jsx(R,{children:"SHIF / NHIF"}),e.jsx(R,{align:"right",children:Vt((null==(u=N.data)?void 0:u.shif)??N.shif)})]}),e.jsxs(T,{children:[e.jsx(R,{children:"Housing Levy"}),e.jsx(R,{align:"right",children:Vt((null==(p=N.data)?void 0:p.housing_levy)??N.housing_levy)})]}),e.jsxs(T,{children:[e.jsx(R,{children:"Personal Relief"}),e.jsx(R,{align:"right",children:Vt((null==(j=N.data)?void 0:j.personal_relief)??N.personal_relief)})]}),e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Total Deductions"})}),e.jsx(R,{align:"right",children:e.jsx("strong",{children:Vt((null==(g=N.data)?void 0:g.total_deductions)??N.total_deductions)})})]}),e.jsxs(T,{children:[e.jsx(R,{children:e.jsx("strong",{children:"Net Salary (after statutory)"})}),e.jsx(R,{align:"right",sx:{fontWeight:700},children:Vt((null==(y=N.data)?void 0:y.net_salary)??N.net_salary)})]})]})]})]}),!E&&N&&!N.success&&e.jsxs(s,{color:"error",mt:2,children:["Calculation endpoint responded with an error: ",N.message??"Unknown error"]})]})})}const Xt=240;function Zt(){var o,c,j,g;const f=ne(),_=me(),{logout:C,user:S}=Un(),[L,N]=Z.useState("profile"),[F,M]=Z.useState(!1),[H,U]=Z.useState(!1),[J,K]=Z.useState({leaveType:"",startDate:"",endDate:"",reason:""}),[G,Y]=Z.useState(!1),[V,Q]=Z.useState({email:"",phone:""}),{data:X,isLoading:ee}=he("myProfile",()=>it.getMyProfile(),{onError:e=>{qn.error("Failed to load employee data")}}),te=(null==X?void 0:X.data)||(null==X?void 0:X.employee)||X,{data:se=[],isLoading:ae}=he({queryKey:["myPayslips",null==te?void 0:te.id],queryFn:ot.getMyPayslips,enabled:!!(null==te?void 0:te.id)}),{data:re}=he(["leaveRequests",null==te?void 0:te.id],()=>te?St(te.id):null,{enabled:!!(null==te?void 0:te.id)}),le=(null==re?void 0:re.records)||[],{data:ie}=he(["leaveBalance",null==te?void 0:te.id],()=>te?It(te.id):null,{enabled:!!(null==te?void 0:te.id)}),oe=(null==ie?void 0:ie.balance)||{annual:{total:21,used:0,remaining:21},sick:{total:14,used:0,remaining:14},maternity:{total:90,used:0,remaining:90}},ce=xe(e=>wt(e),{onSuccess:()=>{qn.success("Leave request submitted successfully!"),_.invalidateQueries(["leaveRequests",null==te?void 0:te.id]),_.invalidateQueries("leaveRequests"),U(!1),K({leaveType:"",startDate:"",endDate:"",reason:""})},onError:e=>{var n,t;qn.error((null==(t=null==(n=e.response)?void 0:n.data)?void 0:t.message)||"Failed to submit leave request")}}),de=xe(e=>it.updateMyProfile(e),{onSuccess:()=>{qn.success("Profile updated successfully"),_.invalidateQueries("myProfile"),Y(!1)},onError:e=>{var n,t;qn.error((null==(t=null==(n=e.response)?void 0:n.data)?void 0:t.message)||"Failed to update profile")}}),ue=async()=>{await C(),f("/employee/login")},pe=[{id:"profile",label:"My Profile",icon:e.jsx(nn,{})},{id:"documents",label:"My Documents",icon:e.jsx(Ue,{})},{id:"payslip",label:"My Salary",icon:e.jsx(en,{})},{id:"payslips",label:"Payslips",icon:e.jsx(tn,{})},{id:"leave",label:"Leave Management",icon:e.jsx(Ce,{})},{id:"attendance",label:"Attendance",icon:e.jsx(Se,{})}],ge=e.jsxs(t,{children:[e.jsxs(t,{sx:{p:2,textAlign:"center",borderBottom:1,borderColor:"divider"},children:[e.jsx(i,{sx:{width:60,height:60,bgcolor:"#11998e",fontSize:24,mx:"auto",mb:1},children:(null==(o=null==te?void 0:te.first_name)?void 0:o.charAt(0))||(null==(c=null==S?void 0:S.username)?void 0:c.charAt(0))||"E"}),e.jsxs(s,{variant:"subtitle1",fontWeight:600,children:[null==te?void 0:te.first_name," ",null==te?void 0:te.last_name]}),e.jsx(s,{variant:"caption",color:"text.secondary",children:"Employee Portal"})]}),e.jsxs(h,{children:[pe.map(n=>e.jsx(x,{disablePadding:!0,children:e.jsxs(m,{selected:L===n.id,onClick:()=>N(n.id),children:[e.jsx(u,{children:n.icon}),e.jsx(p,{primary:n.label})]})},n.id)),e.jsx(a,{sx:{my:2}}),e.jsx(x,{disablePadding:!0,children:e.jsxs(m,{onClick:ue,children:[e.jsx(u,{children:e.jsx(ye,{})}),e.jsx(p,{primary:"Logout"})]})})]})]});return ee?e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsx(w,{})}):te?e.jsxs(t,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(r,{position:"fixed",sx:{display:{sm:"none"},width:"100%"},children:e.jsxs(n,{children:[e.jsx(l,{color:"inherit",edge:"start",onClick:()=>M(!F),sx:{mr:2},children:e.jsx(je,{})}),e.jsx(s,{variant:"h6",noWrap:!0,component:"div",children:"Employee Portal"})]})}),e.jsxs(t,{component:"nav",sx:{width:{sm:Xt},flexShrink:{sm:0}},children:[e.jsx(d,{variant:"temporary",open:F,onClose:()=>M(!F),ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Xt}},children:ge}),e.jsx(d,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Xt}},open:!0,children:ge})]}),e.jsxs(t,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - 240px)"},mt:{xs:7,sm:0}},children:[e.jsx(b,{sx:{p:3,mb:3,background:"linear-gradient(135deg, #11998e 0%, #0d7a6f 100%)",color:"white"},children:e.jsxs(k,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(k,{item:!0,children:e.jsxs(i,{sx:{width:80,height:80,bgcolor:"white",color:"#11998e",fontSize:32,fontWeight:700},children:[null==(j=te.first_name)?void 0:j.charAt(0),null==(g=te.last_name)?void 0:g.charAt(0)]})}),e.jsxs(k,{item:!0,xs:!0,children:[e.jsxs(s,{variant:"h4",sx:{fontWeight:600,mb:1},children:[te.first_name," ",te.last_name]}),e.jsxs(s,{variant:"body1",sx:{mb:.5},children:[te.position_title||"Position"," â€¢"," ",te.department_name||"Department"]}),e.jsxs(s,{variant:"body2",sx:{opacity:.9},children:["Employee ID: ",te.employee_no||"N/A"]})]})]})}),"profile"===L&&e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(b,{sx:{p:3},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Personal Information"}),e.jsx(l,{size:"small",color:"primary",onClick:()=>{Q({email:te.work_email||te.personal_email||"",phone:te.phone||""}),Y(!0)},children:e.jsx(Fe,{})})]}),e.jsx(a,{sx:{mb:2}}),e.jsxs(t,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(Je,{color:"action"}),e.jsxs(t,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"Email"}),e.jsx(s,{variant:"body2",children:te.work_email||te.personal_email||"N/A"})]})]}),e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(Ve,{color:"action"}),e.jsxs(t,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"Phone"}),e.jsx(s,{variant:"body2",children:te.phone||"N/A"})]})]}),e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(_e,{color:"action"}),e.jsxs(t,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"Position"}),e.jsx(s,{variant:"body2",children:te.position_title||"N/A"})]})]}),e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(Qe,{color:"action"}),e.jsxs(t,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"Join Date"}),e.jsx(s,{variant:"body2",children:te.hire_date||"N/A"})]})]}),e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(Xe,{color:"action"}),e.jsxs(t,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"Address"}),e.jsx(s,{variant:"body2",children:te.residential_address||"N/A"})]})]})]})]})}),e.jsxs(k,{item:!0,xs:12,md:6,children:[e.jsxs(b,{sx:{p:3,mb:3},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Banking Information"}),e.jsx(a,{sx:{mb:2}}),e.jsxs(t,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(Ze,{color:"action"}),e.jsxs(t,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"Bank Name"}),e.jsx(s,{variant:"body2",children:te.bank_name||"Not provided"})]})]}),e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(Ze,{color:"action"}),e.jsxs(t,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"Account Number"}),e.jsx(s,{variant:"body2",children:te.bank_account_number||"Not provided"})]})]})]})]}),e.jsxs(b,{sx:{p:3,background:"linear-gradient(135deg, #11998e 0%, #0d7a6f 100%)",color:"white"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:1},children:"Employment Status"}),e.jsx(z,{label:te.employment_status||"Active",sx:{bgcolor:"white",color:"#11998e",fontWeight:600}}),e.jsxs(s,{variant:"caption",display:"block",sx:{mt:2,opacity:.9},children:["Department: ",te.department_name||"N/A"]})]})]})]}),"payslip"===L&&e.jsx(b,{sx:{p:3},children:e.jsx(Qt,{})}),"payslips"===L&&e.jsxs(b,{sx:{p:3},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"My Payslips"}),ae?e.jsx(t,{display:"flex",justifyContent:"center",py:5,children:e.jsx(w,{})}):se.length>0?e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Period"}),e.jsx(R,{children:"Employee #"}),e.jsx(R,{align:"right",children:"Gross Pay"}),e.jsx(R,{align:"right",children:"Net Pay"}),e.jsx(R,{align:"center",children:"Status"}),e.jsx(R,{align:"center",children:"Actions"})]})}),e.jsx(D,{children:se.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:new Date(n.period_year,n.period_month-1).toLocaleString("default",{month:"long",year:"numeric"})}),e.jsx(R,{children:e.jsxs("strong",{children:["#",n.employee_no]})}),e.jsxs(R,{align:"right",children:["KES ",parseFloat(n.gross_pay).toLocaleString()]}),e.jsxs(R,{align:"right",sx:{fontWeight:600},children:["KES ",parseFloat(n.net_pay).toLocaleString()]}),e.jsx(R,{align:"center",children:e.jsx(z,{label:"paid"===n.status?"PAID":"APPROVED",color:"paid"===n.status?"success":"primary",size:"small"})}),e.jsx(R,{align:"center",children:e.jsx(v,{size:"small",variant:"outlined",startIcon:e.jsx(Ue,{}),onClick:()=>{ot.downloadPayslip(te.id,n.period_month,n.period_year)},children:"Download"})})]},n.id))})]})}):e.jsxs(b,{sx:{p:8,textAlign:"center",backgroundColor:"#f9f9f9"},children:[e.jsx(en,{sx:{fontSize:60,color:"#ccc",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",children:"No payslips available yet"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Your payslips will appear here once payroll is approved."})]})]}),"leave"===L&&e.jsxs(t,{children:[e.jsxs(k,{container:!0,spacing:3,mb:3,children:[e.jsx(k,{item:!0,xs:12,md:4,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, #2563eb 0%, #1e40af 100%)",color:"white"},children:e.jsxs(I,{children:[e.jsx(s,{variant:"h6",sx:{mb:1},children:"Annual Leave"}),e.jsx(s,{variant:"h3",sx:{fontWeight:700},children:oe.annual.remaining}),e.jsx(s,{variant:"body2",children:"Days Remaining"}),e.jsxs(s,{variant:"caption",children:["Used: ",oe.annual.used," /"," ",oe.annual.total]})]})})}),e.jsx(k,{item:!0,xs:12,md:4,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, #16a34a 0%, #15803d 100%)",color:"white"},children:e.jsxs(I,{children:[e.jsx(s,{variant:"h6",sx:{mb:1},children:"Sick Leave"}),e.jsx(s,{variant:"h3",sx:{fontWeight:700},children:oe.sick.remaining}),e.jsx(s,{variant:"body2",children:"Days Remaining"}),e.jsxs(s,{variant:"caption",children:["Used: ",oe.sick.used," / ",oe.sick.total]})]})})}),e.jsx(k,{item:!0,xs:12,md:4,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, #11998e 0%, #0d7a6f 100%)",color:"white"},children:e.jsxs(I,{children:[e.jsx(s,{variant:"h6",sx:{mb:1},children:"Maternity Leave"}),e.jsx(s,{variant:"h3",sx:{fontWeight:700},children:oe.maternity.remaining}),e.jsx(s,{variant:"body2",children:"Days Remaining"}),e.jsxs(s,{variant:"caption",children:["Used: ",oe.maternity.used," /"," ",oe.maternity.total]})]})})})]}),e.jsxs(b,{sx:{p:3},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"My Leave Requests"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(ze,{}),onClick:()=>U(!0),sx:{...pt,backgroundColor:"#11998e","&:hover":{backgroundColor:"#0d7a6f"}},children:"New Request"})]}),e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Leave Type"}),e.jsx(R,{children:"Start Date"}),e.jsx(R,{children:"End Date"}),e.jsx(R,{align:"center",children:"Days"}),e.jsx(R,{align:"center",children:"Status"})]})}),e.jsx(D,{children:le.length>0?le.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.type||n.leave_type}),e.jsx(R,{children:n.startDate||n.start_date}),e.jsx(R,{children:n.endDate||n.end_date}),e.jsx(R,{align:"center",children:n.days}),e.jsx(R,{align:"center",children:e.jsx(z,{label:n.status,color:"approved"===n.status?"success":"pending"===n.status?"warning":"default",size:"small"})})]},n.id)):e.jsx(T,{children:e.jsx(R,{colSpan:5,align:"center",children:"No leave requests"})})})]})})]})]}),"attendance"===L&&e.jsxs(b,{sx:{p:3},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:3},children:"My Attendance Records"}),e.jsx(E,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Date"}),e.jsx(R,{children:"Check In"}),e.jsx(R,{children:"Check Out"}),e.jsx(R,{align:"center",children:"Hours Worked"}),e.jsx(R,{align:"center",children:"Status"})]})}),e.jsx(D,{children:[{id:1,date:"2025-10-14",checkIn:"08:00 AM",checkOut:"05:00 PM",hours:9,status:"Present"},{id:2,date:"2025-10-13",checkIn:"08:05 AM",checkOut:"05:10 PM",hours:9,status:"Present"},{id:3,date:"2025-10-12",checkIn:"08:00 AM",checkOut:"05:00 PM",hours:9,status:"Present"},{id:4,date:"2025-10-11",checkIn:"08:15 AM",checkOut:"05:00 PM",hours:8.75,status:"Late"},{id:5,date:"2025-10-10",checkIn:"08:00 AM",checkOut:"05:00 PM",hours:9,status:"Present"}].map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.date}),e.jsx(R,{children:n.checkIn}),e.jsx(R,{children:n.checkOut}),e.jsxs(R,{align:"center",children:[n.hours," hrs"]}),e.jsx(R,{align:"center",children:e.jsx(z,{label:n.status,color:"Present"===n.status?"success":"warning",size:"small"})})]},n.id))})]})})]}),"documents"===L&&e.jsx(b,{sx:{p:3},children:e.jsx(Yt,{})}),e.jsxs(O,{open:H,onClose:()=>U(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(q,{children:"New Leave Request"}),e.jsx(B,{children:e.jsxs(t,{sx:{pt:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(y,{select:!0,fullWidth:!0,label:"Leave Type",value:J.leaveType,onChange:e=>K({...J,leaveType:e.target.value}),SelectProps:{native:!0},children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Annual Leave",children:"Annual Leave"}),e.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),e.jsx("option",{value:"Maternity Leave",children:"Maternity Leave"}),e.jsx("option",{value:"Paternity Leave",children:"Paternity Leave"})]}),e.jsx(y,{fullWidth:!0,type:"date",label:"Start Date",value:J.startDate,onChange:e=>K({...J,startDate:e.target.value}),InputLabelProps:{shrink:!0}}),e.jsx(y,{fullWidth:!0,type:"date",label:"End Date",value:J.endDate,onChange:e=>K({...J,endDate:e.target.value}),InputLabelProps:{shrink:!0}}),e.jsx(y,{fullWidth:!0,multiline:!0,rows:3,label:"Reason",value:J.reason,onChange:e=>K({...J,reason:e.target.value})})]})}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>U(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>{if(!(J.leaveType&&J.startDate&&J.endDate&&J.reason))return void qn.error("Please fill in all fields");if(!(null==te?void 0:te.id))return void qn.error("Employee information not available");const e=new Date(J.startDate),n=new Date(J.endDate),t=Math.ceil((n-e)/864e5)+1,s={employee_id:te.id,leave_type:J.leaveType,start_date:J.startDate,end_date:J.endDate,days:t,reason:J.reason,status:"pending"};ce.mutate(s)},sx:{backgroundColor:"#11998e","&:hover":{backgroundColor:"#0d7a6f"}},children:"Submit Request"})]})]}),e.jsxs(O,{open:G,onClose:()=>Y(!1),children:[e.jsx(q,{children:"Edit Contact Information"}),e.jsxs(B,{children:[e.jsx(y,{fullWidth:!0,margin:"normal",label:"Email",value:V.email,onChange:e=>Q({...V,email:e.target.value})}),e.jsx(y,{fullWidth:!0,margin:"normal",label:"Phone Number",value:V.phone,onChange:e=>Q({...V,phone:e.target.value})})]}),e.jsxs($,{children:[e.jsx(v,{onClick:()=>Y(!1),children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:()=>de.mutate({email:V.email,phone:V.phone}),disabled:de.isLoading,children:de.isLoading?"Saving...":"Save"})]})]})]})]}):e.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:e.jsxs(b,{sx:{p:4,textAlign:"center"},children:[e.jsx(s,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No employee data available"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Unable to load your profile. Please contact HR."}),e.jsx(v,{variant:"contained",onClick:ue,children:"Logout"})]})})}function es(){const n=me(),[r,i]=Z.useState(0),[o,d]=Z.useState((new Date).getMonth()+1),[h,x]=Z.useState((new Date).getFullYear()),[m,u]=Z.useState({personalRelief:2400,nssfRate:6,nssfEmployerRate:6,nssfUpperLimit:36e3,shifRate:2.75,housingLevyRate:1.5,overtimeRate:150,workingHoursPerMonth:160,workingDaysPerMonth:22,companyName:"Evolve",companyAddress:"Nairobi, Kenya",companyPin:"P000000000A",companyEmail:"payroll@evolve.com",companyPhone:"+254 700 000000"}),{data:p}=he("employees",it.getAllEmployees),j=(null==p?void 0:p.records)||[],g=xe(()=>ot.generateBulkPayroll(o,h),{onSuccess:()=>{qn.success("Payroll generated successfully!"),n.invalidateQueries("payroll")},onError:()=>{qn.error("Failed to generate payroll")}}),f=(e,n)=>{u(t=>({...t,[e]:n}))},_=e=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e-1],C=j.filter(e=>"active"===e.employment_status).length,S=j.filter(e=>"active"===e.employment_status).reduce((e,n)=>e+(parseFloat(n.basic_salary)||0),0);return e.jsxs(t,{children:[e.jsx(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(sn,{sx:{fontSize:32,color:"primary.main"}}),e.jsx(s,{variant:"h4",sx:{fontWeight:600},children:"Security & Configuration"})]})}),e.jsxs(F,{value:r,onChange:(e,n)=>i(n),sx:{mb:3},children:[e.jsx(M,{label:"Security Overview",icon:e.jsx(an,{}),iconPosition:"start"}),e.jsx(M,{label:"Payroll Management",icon:e.jsx(rn,{}),iconPosition:"start"}),e.jsx(M,{label:"Payroll Configuration",icon:e.jsx(ln,{}),iconPosition:"start"})]}),0===r&&e.jsxs(t,{children:[e.jsxs(k,{container:!0,spacing:3,mb:3,children:[e.jsx(k,{item:!0,xs:12,md:3,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, #1a365d 0%, #2d3748 100%)",color:"white"},children:e.jsx(I,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(on,{sx:{fontSize:40}}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",sx:{fontWeight:700},children:C}),e.jsx(s,{variant:"body2",children:"Active Employees"})]})]})})})}),e.jsx(k,{item:!0,xs:12,md:3,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, #d4af37 0%, #b8941e 100%)",color:"white"},children:e.jsx(I,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(sn,{sx:{fontSize:40}}),e.jsxs(t,{children:[e.jsxs(s,{variant:"h4",sx:{fontWeight:700},children:[98,"%"]}),e.jsx(s,{variant:"body2",children:"Compliance Score"})]})]})})})}),e.jsx(k,{item:!0,xs:12,md:3,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, #2563eb 0%, #1e40af 100%)",color:"white"},children:e.jsx(I,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(cn,{sx:{fontSize:40}}),e.jsxs(t,{children:[e.jsxs(s,{variant:"h4",sx:{fontWeight:700},children:["KES ",S.toLocaleString()]}),e.jsx(s,{variant:"body2",children:"Total Payroll"})]})]})})})}),e.jsx(k,{item:!0,xs:12,md:3,children:e.jsx(P,{sx:{background:"linear-gradient(135deg, #16a34a 0%, #15803d 100%)",color:"white"},children:e.jsx(I,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(ln,{sx:{fontSize:40}}),e.jsxs(t,{children:[e.jsx(s,{variant:"h4",sx:{fontWeight:700},children:0}),e.jsx(s,{variant:"body2",children:"Security Events"})]})]})})})})]}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(b,{sx:{p:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"System Security Status"}),e.jsx(a,{sx:{mb:2}}),e.jsxs(t,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Data Encryption"}),e.jsx(z,{label:"Active",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Two-Factor Authentication"}),e.jsx(z,{label:"Enabled",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Audit Logging"}),e.jsx(z,{label:"Active",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Access Control"}),e.jsx(z,{label:"Enforced",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Data Backup"}),e.jsx(z,{label:"Daily",color:"info",size:"small"})]})]})]})}),e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(b,{sx:{p:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Compliance & Regulations"}),e.jsx(a,{sx:{mb:2}}),e.jsxs(t,{display:"flex",flexDirection:"column",gap:2,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"KRA Tax Compliance"}),e.jsx(z,{label:"Compliant",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"NSSF Contributions"}),e.jsx(z,{label:"Up to Date",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"SHIF Contributions"}),e.jsx(z,{label:"Up to Date",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Housing Levy"}),e.jsx(z,{label:"Active",color:"success",size:"small"})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{children:"Labor Law Compliance"}),e.jsx(z,{label:"Compliant",color:"success",size:"small"})]})]})]})}),e.jsx(k,{item:!0,xs:12,children:e.jsxs(b,{sx:{p:3},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Recent Security Activity"}),e.jsx(a,{sx:{mb:2}}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"No recent security events detected. System is operating normally."})]})})]})]}),1===r&&e.jsxs(t,{children:[e.jsx(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:e.jsxs(t,{display:"flex",gap:2,children:[e.jsx(y,{select:!0,size:"small",label:"Month",value:o,onChange:e=>d(e.target.value),sx:{width:120},children:Array.from({length:12},(e,n)=>n+1).map(n=>e.jsx(c,{value:n,children:_(n)},n))}),e.jsx(y,{select:!0,size:"small",label:"Year",value:h,onChange:e=>x(e.target.value),sx:{width:100},children:[2024,2025,2026].map(n=>e.jsx(c,{value:n,children:n},n))})]})}),e.jsx(b,{sx:{p:3,mb:3},children:e.jsxs(k,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(k,{item:!0,xs:12,md:6,children:[e.jsxs(s,{variant:"h6",children:["Payroll Period: ",_(o)," ",h]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:[j.filter(e=>"active"===e.employment_status).length," active employees"]})]}),e.jsx(k,{item:!0,xs:12,md:6,sx:{textAlign:"right"},children:e.jsx(v,{variant:"contained",startIcon:e.jsx(He,{}),onClick:()=>{window.confirm(`Generate payroll for ${_(o)} ${h}?`)&&g.mutate()},disabled:g.isLoading,sx:pt,children:g.isLoading?"Processing...":"Generate Payroll"})})]})}),e.jsx(E,{component:b,children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Employee #"}),e.jsx(R,{children:"Name"}),e.jsx(R,{align:"right",children:"Gross Pay"}),e.jsx(R,{align:"right",children:"NSSF"}),e.jsx(R,{align:"right",children:"SHIF"}),e.jsx(R,{align:"right",children:"Housing Levy"}),e.jsx(R,{align:"right",children:"PAYE"}),e.jsx(R,{align:"right",children:"Total Deductions"}),e.jsx(R,{align:"right",children:"Net Pay"}),e.jsx(R,{align:"center",children:"Status"}),e.jsx(R,{align:"center",children:"Actions"})]})}),e.jsxs(D,{children:[j.filter(e=>"active"===e.employment_status).map(n=>{const t=(e=>{const n=parseFloat(e.basic_salary)||0,t=Math.min(n,m.nssfUpperLimit)*(m.nssfRate/100),s=n*(m.shifRate/100),a=n*(m.housingLevyRate/100);let r=0;const l=n-t;r=l<=24e3?.1*l:l<=32333?2400+.25*(l-24e3):l<=5e5?4483.25+.3*(l-32333):l<=8e5?144783.35+.325*(l-5e5):242283.35+.35*(l-8e5),r=Math.max(0,r-m.personalRelief);const i=t+s+a+r,o=n-i;return{grossPay:n.toFixed(2),nssf:t.toFixed(2),shif:s.toFixed(2),housingLevy:a.toFixed(2),paye:r.toFixed(2),totalDeductions:i.toFixed(2),netPay:o.toFixed(2)}})(n);return e.jsxs(T,{children:[e.jsx(R,{children:n.employee_number}),e.jsx(R,{children:n.full_name}),e.jsxs(R,{align:"right",children:["KES ",t.grossPay]}),e.jsxs(R,{align:"right",children:["KES ",t.nssf]}),e.jsxs(R,{align:"right",children:["KES ",t.shif]}),e.jsxs(R,{align:"right",children:["KES ",t.housingLevy]}),e.jsxs(R,{align:"right",children:["KES ",t.paye]}),e.jsxs(R,{align:"right",children:["KES ",t.totalDeductions]}),e.jsxs(R,{align:"right",sx:{fontWeight:600},children:["KES ",t.netPay]}),e.jsx(R,{align:"center",children:e.jsx(z,{label:"Draft",size:"small",color:"warning"})}),e.jsxs(R,{align:"center",children:[e.jsx(l,{size:"small",title:"Download Payslip",children:e.jsx(Ue,{})}),e.jsx(l,{size:"small",title:"Email Payslip",children:e.jsx(Je,{})})]})]},n.id)}),0===j.filter(e=>"active"===e.employment_status).length&&e.jsx(T,{children:e.jsx(R,{colSpan:11,align:"center",children:"No active employees found"})})]})]})})]}),2===r&&e.jsxs(b,{sx:{p:4},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600},children:"Tax & Statutory Deductions"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"Personal Relief (Monthly)",type:"number",value:m.personalRelief,onChange:e=>f("personalRelief",parseFloat(e.target.value)),InputProps:{startAdornment:"KES "}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"NSSF Rate (%)",type:"number",value:m.nssfRate,onChange:e=>f("nssfRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"NSSF Upper Limit",type:"number",value:m.nssfUpperLimit,onChange:e=>f("nssfUpperLimit",parseFloat(e.target.value)),InputProps:{startAdornment:"KES "}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"SHIF Rate (%)",type:"number",value:m.shifRate,onChange:e=>f("shifRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"Housing Levy Rate (%)",type:"number",value:m.housingLevyRate,onChange:e=>f("housingLevyRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"}})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{fullWidth:!0,label:"Overtime Rate (%)",type:"number",value:m.overtimeRate,onChange:e=>f("overtimeRate",parseFloat(e.target.value)),InputProps:{endAdornment:"%"}})})]}),e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mt:4},children:"Working Hours"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Working Hours Per Month",type:"number",value:m.workingHoursPerMonth,onChange:e=>f("workingHoursPerMonth",parseInt(e.target.value))})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Working Days Per Month",type:"number",value:m.workingDaysPerMonth,onChange:e=>f("workingDaysPerMonth",parseInt(e.target.value))})})]}),e.jsx(s,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mt:4},children:"Company Information"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Company Name",value:m.companyName,onChange:e=>f("companyName",e.target.value)})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Company PIN",value:m.companyPin,onChange:e=>f("companyPin",e.target.value)})}),e.jsx(k,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Company Address",value:m.companyAddress,onChange:e=>f("companyAddress",e.target.value)})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Company Email",type:"email",value:m.companyEmail,onChange:e=>f("companyEmail",e.target.value)})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{fullWidth:!0,label:"Company Phone",value:m.companyPhone,onChange:e=>f("companyPhone",e.target.value)})})]}),e.jsx(t,{sx:{mt:4,display:"flex",justifyContent:"flex-end"},children:e.jsx(v,{variant:"contained",startIcon:e.jsx(Oe,{}),onClick:()=>{localStorage.setItem("payrollConfig",JSON.stringify(m)),qn.success("Configuration saved successfully!")},sx:pt,children:"Save Configuration"})})]})]})}var ns={},ts={};const ss=re(J);var as;function rs(){return as||(as=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=ss}(ts)),ts}var ls=K;Object.defineProperty(ns,"__esModule",{value:!0});var is=ns.default=void 0,os=ls(rs()),cs=e;is=ns.default=(0,os.default)((0,cs.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var ds={},hs=K;Object.defineProperty(ds,"__esModule",{value:!0});var xs=ds.default=void 0,ms=hs(rs()),us=e;xs=ds.default=(0,ms.default)((0,us.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var ps={},js=K;Object.defineProperty(ps,"__esModule",{value:!0});var gs=ps.default=void 0,ys=js(rs()),fs=e;gs=ps.default=(0,ys.default)((0,fs.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var vs={},bs=K;Object.defineProperty(vs,"__esModule",{value:!0});var _s=vs.default=void 0,Cs=bs(rs()),Ss=e;function ws({open:n,onClose:a,department:r,onSuccess:l}){const[i,o]=Z.useState(""),[c,d]=Z.useState([]),[m,u]=Z.useState(new Set),[j,g]=Z.useState(!1),[f,b]=Z.useState(!1),_=()=>{o(""),d([]),u(new Set),a&&a()};return e.jsxs(O,{fullWidth:!0,maxWidth:"sm",open:n,onClose:_,children:[e.jsxs(q,{children:["Assign Employees to ",(null==r?void 0:r.name)||""]}),e.jsxs(B,{children:[e.jsx(y,{label:"Search employees (name, email, number)",fullWidth:!0,value:i,onChange:e=>(async e=>{var n,t;if(o(e),e.length<2)d([]);else try{g(!0);const s=await it.searchEmployees(e),a=((null==(n=null==s?void 0:s.data)?void 0:n.records)||(null==(t=null==s?void 0:s.data)?void 0:t.data)||[]).map(e=>({id:e.id,full_name:e.full_name||`${e.first_name} ${e.last_name}`,position:e.position_title||"",department:e.department_name||""}));d(a)}catch(s){d([])}finally{g(!1)}})(e.target.value),margin:"normal"}),j&&e.jsx(t,{textAlign:"center",my:1,children:e.jsx(w,{size:24})}),!j&&0===c.length&&i.length>=2&&e.jsx(s,{variant:"body2",color:"text.secondary",children:"No employees found."}),e.jsx(h,{dense:!0,sx:{maxHeight:320,overflowY:"auto",mt:1},children:c.map(n=>e.jsxs(x,{button:!0,onClick:()=>{return e=n.id,void u(n=>{const t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t});var e},sx:{borderBottom:"1px solid #eee"},children:[e.jsx(H,{checked:m.has(n.id)}),e.jsx(p,{primary:n.full_name,secondary:`${n.position} â€” ${n.department}`})]},n.id))})]}),e.jsxs($,{children:[e.jsx(v,{onClick:_,children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:async()=>{var e,n;if(!r||0===m.size)return alert("Select at least one employee.");b(!0);try{for(const e of m)await xt(r.id,e);l&&l()}catch(t){alert((null==(n=null==(e=null==t?void 0:t.response)?void 0:e.data)?void 0:n.message)||"Failed to assign employees")}finally{b(!1)}},disabled:f||0===m.size,sx:{background:"#1a365d","&:hover":{background:"#2d4a70"}},children:f?"Assigning...":`Assign (${m.size})`})]})]})}function ks({open:n,onClose:a,onSuccess:r}){const[i,o]=Z.useState(""),[c,d]=Z.useState([""]),[h,x]=Z.useState(!1),m=()=>{o(""),d([""]),a()};return e.jsxs(O,{fullWidth:!0,maxWidth:"sm",open:n,onClose:m,children:[e.jsx(q,{children:"Add Department"}),e.jsxs(B,{children:[e.jsx(y,{fullWidth:!0,label:"Department Name",margin:"normal",value:i,onChange:e=>o(e.target.value)}),e.jsxs(t,{mt:2,mb:1,display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(s,{variant:"subtitle1",children:"Positions (optional)"}),e.jsx(v,{size:"small",startIcon:e.jsx(ze,{}),onClick:()=>d(e=>[...e,""]),children:"Add field"})]}),c.map((n,s)=>e.jsxs(t,{display:"flex",gap:1,alignItems:"center",mb:1,children:[e.jsx(y,{label:`Position #${s+1}`,fullWidth:!0,value:n,onChange:e=>((e,n)=>{d(t=>{const s=[...t];return s[e]=n,s})})(s,e.target.value)}),c.length>1&&e.jsx(l,{onClick:()=>(e=>d(n=>n.filter((n,t)=>t!==e)))(s),"aria-label":"remove position",children:e.jsx($e,{})})]},s))]}),e.jsxs($,{children:[e.jsx(v,{onClick:m,children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:async()=>{var e,n,t,s,a,l;if(i.trim()){x(!0);try{const a=await(o={name:i},Bn.post("/employer/departments.php",o));if(!(null==(e=null==a?void 0:a.data)?void 0:e.success))throw new Error((null==(n=null==a?void 0:a.data)?void 0:n.message)||"Failed to create department");const l=null==(s=null==(t=a.data)?void 0:t.data)?void 0:s.id,d=c.map(e=>null==e?void 0:e.trim()).filter(Boolean);for(const e of d)await ut({title:e,department_id:l});r&&r(),m()}catch(d){alert((null==(l=null==(a=null==d?void 0:d.response)?void 0:a.data)?void 0:l.message)||d.message||"Error creating department")}finally{x(!1)}var o}else alert("Department name is required")},disabled:h,sx:{background:"#1a365d","&:hover":{background:"#2d4a70"}},children:h?e.jsx(w,{size:20}):"Create"})]})]})}function Ps({open:n,onClose:r,department:i,onSuccess:o}){const[c,d]=Z.useState(""),[m,u]=Z.useState(!1),[j,g]=Z.useState([]),[f,b]=Z.useState(!1),[_,C]=Z.useState(""),[S,k]=Z.useState(!1),[P,I]=Z.useState(new Set);Z.useEffect(()=>{i?(d(i.name||""),E(i.id)):(d(""),g([]))},[i]);const E=async e=>{var n;if(e){b(!0);try{const t=await mt();if(null==(n=null==t?void 0:t.data)?void 0:n.success){const n=(t.data.data||[]).filter(n=>Number(n.department_id)===Number(e));g(n)}else g([])}catch(t){g([])}finally{b(!1)}}},W=async e=>{var n,t;if(window.confirm("Delete this position? This will fail if it has active employees.")){I(n=>new Set(n).add(e));try{await(s=e,Bn.delete("/employer/positions.php?id="+s)),await E(i.id)}catch(a){alert((null==(t=null==(n=null==a?void 0:a.response)?void 0:n.data)?void 0:t.message)||"Failed to delete position")}finally{I(n=>{const t=new Set(n);return t.delete(e),t})}var s}},A=()=>{d(""),g([]),C(""),r()};return e.jsxs(O,{fullWidth:!0,maxWidth:"sm",open:n,onClose:A,children:[e.jsx(q,{children:"Edit Department"}),e.jsxs(B,{children:[e.jsx(y,{fullWidth:!0,label:"Department Name",margin:"normal",value:c,onChange:e=>d(e.target.value)}),e.jsxs(t,{mt:3,children:[e.jsx(s,{variant:"subtitle1",children:"Positions"}),e.jsx(a,{sx:{mb:1}}),f?e.jsx(t,{display:"flex",justifyContent:"center",py:2,children:e.jsx(w,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(h,{dense:!0,children:[0===j.length&&e.jsx(x,{children:e.jsx(p,{primary:"No positions yet"})}),j.map(n=>e.jsxs(x,{children:[e.jsx(p,{primary:n.title,secondary:n.description?n.description:null}),e.jsx(G,{children:e.jsx(l,{edge:"end","aria-label":"delete",onClick:()=>W(n.id),disabled:P.has(n.id),children:e.jsx($e,{})})})]},n.id))]}),e.jsxs(t,{display:"flex",gap:1,alignItems:"center",mt:1,children:[e.jsx(y,{label:"New position title",value:_,onChange:e=>C(e.target.value),fullWidth:!0}),e.jsx(v,{startIcon:e.jsx(ze,{}),variant:"contained",onClick:async()=>{var e,n;if(_.trim()){k(!0);try{await ut({title:_.trim(),department_id:i.id}),C(""),await E(i.id)}catch(t){alert((null==(n=null==(e=null==t?void 0:t.response)?void 0:e.data)?void 0:n.message)||"Failed to add position")}finally{k(!1)}}else alert("Position title is required")},disabled:S,children:S?e.jsx(w,{size:18}):"Add"})]})]})]})]}),e.jsxs($,{children:[e.jsx(v,{onClick:A,children:"Cancel"}),e.jsx(v,{variant:"contained",onClick:async()=>{var e,n,t,s;if(c.trim()){u(!0);try{const t=await(a={id:i.id,name:c},Bn.put("/employer/departments.php",a));if(!(null==(e=null==t?void 0:t.data)?void 0:e.success))throw new Error((null==(n=null==t?void 0:t.data)?void 0:n.message)||"Failed to update department");o&&o(),r()}catch(l){alert((null==(s=null==(t=null==l?void 0:l.response)?void 0:t.data)?void 0:s.message)||l.message||"Error updating department")}finally{u(!1)}var a}else alert("Department name is required")},disabled:m,sx:{background:"#1a365d","&:hover":{background:"#2d4a70"}},children:m?e.jsx(w,{size:20}):"Save Changes"})]})]})}function Is(){const[n,a]=Z.useState([]),[r,i]=Z.useState(!1),[o,c]=Z.useState(!1),[d,h]=Z.useState(null),[x,m]=Z.useState(!1),[u,p]=Z.useState(!1),[j,g]=Z.useState(null),y=async()=>{try{i(!0);const e=await ht();e.data&&e.data.success&&a(e.data.data||[])}catch(e){}finally{i(!1)}};Z.useEffect(()=>{y()},[]);const f=async e=>{var n,t;if(window.confirm("Delete this department? This will fail if it has active employees."))try{await(e=>Bn.delete("/employer/departments.php?id="+e))(e),y()}catch(s){alert((null==(t=null==(n=null==s?void 0:s.response)?void 0:n.data)?void 0:t.message)||"Delete failed")}};return e.jsxs(t,{children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h5",children:"Departments"}),e.jsx(v,{variant:"contained",startIcon:e.jsx(is,{}),onClick:()=>m(!0),sx:{background:"#1a365d","&:hover":{background:"#2d4a70"}},children:"Add Department"})]}),e.jsx(b,{children:e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Name"}),e.jsx(R,{children:"Manager"}),e.jsx(R,{align:"right",children:"Employees"}),e.jsx(R,{children:"Actions"})]})}),e.jsx(D,{children:n.map(n=>e.jsxs(T,{children:[e.jsx(R,{children:n.name}),e.jsx(R,{children:n.manager_name||"-"}),e.jsx(R,{align:"right",children:n.employee_count??0}),e.jsxs(R,{children:[e.jsx(l,{title:"Assign employees",onClick:()=>(h(n),void c(!0)),children:e.jsx(_s,{})}),e.jsx(l,{title:"Edit",onClick:()=>{g(n),p(!0)},children:e.jsx(xs,{})}),e.jsx(l,{title:"Delete",onClick:()=>f(n.id),children:e.jsx(gs,{})})]})]},n.id))})]})}),e.jsx(ws,{open:o,onClose:()=>c(!1),department:d,onSuccess:()=>{c(!1),h(null),y()}}),e.jsx(ks,{open:x,onClose:()=>m(!1),onSuccess:()=>{m(!1),y()}}),e.jsx(Ps,{open:u,onClose:()=>p(!1),department:j,onSuccess:()=>{p(!1),y()}})]})}function Es(){const{id:n}=ae(),r=ne(),[l,i]=Z.useState(null),[o,d]=Z.useState({}),[h,x]=Z.useState([]),[m,u]=Z.useState([]);Z.useEffect(()=>{!async function(){try{const e=await it.getEmployee(n);e.success&&i({...e.data,id:e.data.id})}catch(e){qn.error("Failed to load employee")}}()},[n]),Z.useEffect(()=>{!async function(){var e,n;try{const[t,s]=await Promise.all([ht(),mt()]);x((null==(e=t.data)?void 0:e.data)||[]),u((null==(n=s.data)?void 0:n.data)||[])}catch(t){qn.error("Failed to load dropdown data")}}()},[]);const p=xe(it.updateEmployee,{onSuccess:()=>{qn.success("Employee updated successfully!"),r(`/employer/employees/${n}`)},onError:e=>{var n,t;qn.error((null==(t=null==(n=e.response)?void 0:n.data)?void 0:t.message)||"Failed to update")}}),j=e=>{const{name:n,value:t}=e.target;i(e=>({...e,[n]:t})),o[n]&&d(e=>({...e,[n]:null}))};return l?e.jsxs(t,{children:[e.jsx(t,{display:"flex",justifyContent:"space-between",mb:3,children:e.jsx(s,{variant:"h4",fontWeight:600,children:"Edit Employee"})}),e.jsx(b,{sx:{p:4},children:e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};return["first_name","last_name","phone","work_email","hire_date","department_id","position_id"].forEach(n=>{l[n]||(e[n]="This field is required")}),d(e),0===Object.keys(e).length})())return qn.error("Fix validation errors");p.mutate(l)},children:[e.jsx(s,{variant:"h6",sx:{color:"primary.main",mb:1},children:"Personal Information"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Employee Number",fullWidth:!0,value:l.employee_no,name:"employee_no",disabled:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"First Name",fullWidth:!0,name:"first_name",value:l.first_name,onChange:j,error:!!o.first_name,helperText:o.first_name,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Middle Name",fullWidth:!0,name:"middle_name",value:l.middle_name||"",onChange:j})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Last Name",fullWidth:!0,name:"last_name",value:l.last_name,onChange:j,error:!!o.last_name,helperText:o.last_name,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{label:"Phone Number",fullWidth:!0,name:"phone",value:l.phone,onChange:j,error:!!o.phone,helperText:o.phone,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"Work Email",fullWidth:!0,name:"work_email",value:l.work_email,onChange:j,error:!!o.work_email,helperText:o.work_email,required:!0})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"Date of Birth",type:"date",fullWidth:!0,name:"date_of_birth",InputLabelProps:{shrink:!0},value:l.date_of_birth||"",onChange:j})}),e.jsx(k,{item:!0,xs:12,sm:6,children:e.jsxs(y,{select:!0,fullWidth:!0,name:"gender",value:l.gender,onChange:j,children:[e.jsx(c,{value:"Male",children:"Male"}),e.jsx(c,{value:"Female",children:"Female"})]})})]}),e.jsx(s,{variant:"h6",sx:{color:"primary.main",mt:4},children:"Employment Information"}),e.jsx(a,{sx:{mb:3}}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{select:!0,label:"Department",fullWidth:!0,name:"department_id",value:l.department_id,onChange:j,error:!!o.department_id,helperText:o.department_id,required:!0,children:h.map(n=>e.jsx(c,{value:n.id,children:n.name},n.id))})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{select:!0,label:"Position",fullWidth:!0,name:"position_id",value:l.position_id,onChange:j,error:!!o.position_id,helperText:o.position_id,required:!0,children:m.map(n=>e.jsx(c,{value:n.id,children:n.title},n.id))})}),e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(y,{type:"date",fullWidth:!0,name:"hire_date",label:"Hire Date",InputLabelProps:{shrink:!0},value:l.hire_date,onChange:j,error:!!o.hire_date,helperText:o.hire_date,required:!0})})]}),e.jsxs(t,{display:"flex",justifyContent:"flex-end",gap:2,mt:4,children:[e.jsx(v,{variant:"outlined",startIcon:e.jsx(Me,{}),onClick:()=>r(`/employer/employees/${n}`),children:"Cancel"}),e.jsx(v,{type:"submit",variant:"contained",startIcon:e.jsx(Oe,{}),sx:pt,children:"Update Employee"})]})]})})]}):e.jsx(s,{children:"Loading employee..."})}function Ws(){const n=ne(),{data:a,isLoading:r,isError:l}=he(["salary-structures"],()=>Lt().then(e=>e.data.data));return e.jsx(t,{p:3,children:e.jsxs(b,{sx:{p:3},children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{variant:"h6",children:"Salary Structures"}),e.jsx(v,{variant:"contained",onClick:()=>n("/employer/salary-structures/create"),children:"Create Structure"})]}),r?e.jsx(t,{textAlign:"center",mt:4,children:e.jsx(w,{})}):l?e.jsx(s,{color:"error",mt:2,children:"Failed to load salary structures."}):e.jsxs(W,{sx:{mt:2},children:[e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(R,{children:"Title"}),e.jsx(R,{children:"Basic Salary"}),e.jsx(R,{children:"Status"}),e.jsx(R,{children:"Active From"}),e.jsx(R,{children:"Active To"}),e.jsx(R,{})]})}),e.jsx(D,{children:(null==a?void 0:a.length)>0?a.map(t=>e.jsxs(T,{children:[e.jsx(R,{children:t.title}),e.jsx(R,{children:t.basic_salary}),e.jsx(R,{children:t.status}),e.jsx(R,{children:t.active_from||"-"}),e.jsx(R,{children:t.active_to||"-"}),e.jsx(R,{children:e.jsx(v,{size:"small",variant:"outlined",onClick:()=>n(`/employer/salary-structures/${t.id}/edit`),children:"Edit"})})]},t.id)):e.jsx(T,{children:e.jsx(R,{colSpan:6,align:"center",children:"No structures found."})})})]})]})})}function As(){const{id:n}=ae(),s=ne(),[a,r]=Z.useState(null);Z.useEffect(()=>{zt(n).then(e=>{const n=e.data.structure||e.data.data||e.data;r(n)}).catch(()=>qn.error("Failed to load structure."))},[n]);return a?e.jsx(Dt,{form:a,setForm:r,onSubmit:async()=>{try{await Ft(n,a),qn.success("Updated successfully."),s("/employer/salary-structures")}catch(e){qn.error("Update failed.")}},isEdit:!0}):e.jsx(t,{textAlign:"center",mt:4,children:e.jsx(w,{})})}_s=vs.default=(0,Cs.default)((0,Ss.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3m6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1z"}),"AssignmentInd");const Ts={getEmployeeSalary:e=>Bn.get(`/employee_salary_structure.php?employee_id=${e}`),assign:(e,n)=>Bn.post("/employee_salary_structure.php",{...n,employee_id:e}),updateAssignment:(e,n)=>Bn.put(`/employee_salary_structure.php?id=${e}`,n)};function Rs(){const{id:n}=ae(),[a,r]=Z.useState(!0),[l,i]=Z.useState([]),[o,d]=Z.useState(""),[h,x]=Z.useState(null);Z.useEffect(()=>{Promise.all([Lt().then(e=>e.data.data),Ts.getEmployeeSalary(n).then(e=>e.data.data)]).then(([e,n])=>{i(e),n&&(x(n),d(n.structure_id||"")),r(!1)})},[n]);return a?e.jsx(t,{textAlign:"center",mt:4,children:e.jsx(w,{})}):e.jsx(t,{p:3,children:e.jsxs(b,{sx:{p:3},children:[e.jsx(s,{variant:"h6",mb:2,children:"Salary Structure Assignment"}),e.jsx(y,{select:!0,label:"Select Salary Structure",value:o,onChange:e=>d(e.target.value),fullWidth:!0,children:l.map(n=>e.jsxs(c,{value:n.id,children:[n.title," â€” ",n.basic_salary]},n.id))}),e.jsx(t,{mt:3,children:h?e.jsx(v,{variant:"contained",onClick:()=>{if(!h)return;const e={structure_id:o};Ts.updateAssignment(h.assignment_id,e).then(()=>qn.success("Updated successfully")).catch(()=>qn.error("Update failed"))},children:"Update Assignment"}):e.jsx(v,{variant:"contained",onClick:()=>{if(!o)return qn.error("Please select a structure");const e={structure_id:o,effective_from:(new Date).toISOString().split("T")[0]};Ts.assign(n,e).then(()=>{qn.success("Salary structure assigned")}).catch(()=>qn.error("Assignment failed"))},children:"Assign Structure"})})]})})}function Ds({children:n}){const{user:t,userType:s,loading:a}=Un();return a?e.jsx("div",{children:"Loading..."}):t&&"employer"===s?n:e.jsx(oe,{to:"/login",replace:!0})}function Ls({children:n}){const{user:t,userType:s,loading:a}=Un();return a?e.jsx("div",{children:"Loading..."}):t&&"employee"===s?n:e.jsx(oe,{to:"/login",replace:!0})}function zs(){return e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx(ie,{path:"/login",element:e.jsx(Zn,{})}),e.jsx(ie,{path:"/signup",element:e.jsx(st,{})}),e.jsx(ie,{path:"/",element:e.jsx(oe,{to:"/login"})}),e.jsx(ie,{path:"/employer/login",element:e.jsx(oe,{to:"/login",replace:!0})}),e.jsx(ie,{path:"/employee/login",element:e.jsx(oe,{to:"/login",replace:!0})}),e.jsxs(ie,{path:"/employer/*",element:e.jsx(Ds,{children:e.jsx(Xn,{})}),children:[e.jsx(ie,{path:"departments",element:e.jsx(Is,{})}),e.jsx(ie,{path:"dashboard",element:e.jsx(ct,{})}),e.jsx(ie,{path:"employees",element:e.jsx(dt,{})}),e.jsx(ie,{path:"employees/new",element:e.jsx(jt,{})}),e.jsx(ie,{path:"employees/:id/edit",element:e.jsx(Es,{})}),e.jsx(ie,{path:"employees/:id",element:e.jsx(bt,{})}),e.jsx(ie,{path:"recruitment",element:e.jsx(_t,{})}),e.jsx(ie,{path:"leave",element:e.jsx(Wt,{})}),e.jsx(ie,{path:"attendance",element:e.jsx(At,{})}),e.jsx(ie,{path:"payroll",element:e.jsx(Ot,{})}),e.jsx(ie,{path:"performance",element:e.jsx(qt,{})}),e.jsx(ie,{path:"training",element:e.jsx($t,{})}),e.jsx(ie,{path:"reports",element:e.jsx(Jt,{})}),e.jsx(ie,{path:"settings",element:e.jsx(Gt,{})}),e.jsx(ie,{path:"security",element:e.jsx(es,{})}),e.jsx(ie,{path:"salary-structures",element:e.jsx(Ws,{})}),e.jsx(ie,{path:"salary-structures/create",element:e.jsx(Mt,{})}),e.jsx(ie,{path:"salary-structures/:id/edit",element:e.jsx(As,{})}),e.jsx(ie,{path:"employees/:id/salary-structure",element:e.jsx(Rs,{})}),e.jsx(ie,{index:!0,element:e.jsx(oe,{to:"dashboard"})})]}),e.jsx(ie,{path:"/employee/portal",element:e.jsx(Ls,{children:e.jsx(Zt,{})})}),e.jsx(ie,{path:"/employee/change-password",element:e.jsx(Ls,{children:e.jsx(at,{})})}),e.jsx(ie,{path:"/employee/salary-structure",element:e.jsx(Ls,{children:e.jsx(Qt,{})})})]}),e.jsx(An,{position:"top-right",autoClose:3e3})]})}const Ns=new ue({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),Fs=Y({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},components:{MuiTextField:{defaultProps:{size:"small"},styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:"12px",fontSize:"14px"},"& .MuiOutlinedInput-input":{padding:"10px 12px"},"& .MuiInputLabel-root":{fontSize:"14px"}}}},MuiSelect:{defaultProps:{size:"small"},styleOverrides:{select:{borderRadius:"12px",fontSize:"14px",padding:"10px 12px"}}}}});dn.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(pe,{client:Ns,children:e.jsx(ce,{children:e.jsxs(V,{theme:Fs,children:[e.jsx(Q,{}),e.jsx(Jn,{children:e.jsx(zs,{})})]})})})}));
